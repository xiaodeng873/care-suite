# ğŸ”§ å‡ºå…¥é‡åŠŸèƒ½é”™è¯¯ä¿®å¤æŒ‡å—

## âŒ é”™è¯¯ä¿¡æ¯
```
column intake_output_records.time_slot does not exist
```

## ğŸ“‹ é—®é¢˜åŸå› 
ç°æœ‰çš„ `intake_output_records` è¡¨ä½¿ç”¨ `hour_slot` (æ•´æ•° 0-23)ï¼Œè€Œæ–°ä»£ç ä½¿ç”¨ `time_slot` (å­—ç¬¦ä¸² '08:00')ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ³• 1: åœ¨ Supabase Dashboard ä¸­æ‰§è¡Œ SQL (æ¨è)

1. **æ‰“å¼€ Supabase Dashboard**
   - è®¿é—®: https://supabase.com/dashboard
   - é€‰æ‹©æ‚¨çš„é¡¹ç›®

2. **æ‰“å¼€ SQL Editor**
   - å·¦ä¾§èœå• â†’ SQL Editor â†’ New Query

3. **æ‰§è¡Œè¿ç§»è„šæœ¬**
   - å¤åˆ¶ `/workspaces/care-suite/APPLY_INTAKE_OUTPUT_MIGRATION.sql` çš„å…¨éƒ¨å†…å®¹
   - ç²˜è´´åˆ° SQL Editor
   - ç‚¹å‡» "Run" æŒ‰é’®

4. **éªŒè¯ç»“æœ**
   ```sql
   -- æ£€æŸ¥ time_slot å­—æ®µæ˜¯å¦å·²æ·»åŠ 
   SELECT column_name, data_type 
   FROM information_schema.columns 
   WHERE table_name = 'intake_output_records' 
   AND column_name = 'time_slot';
   
   -- æ£€æŸ¥æ–°è¡¨æ˜¯å¦åˆ›å»º
   SELECT table_name 
   FROM information_schema.tables 
   WHERE table_name IN ('intake_items', 'output_items');
   ```

### æ–¹æ³• 2: ä½¿ç”¨ Supabase CLI (å¦‚æœå·²é…ç½®)

```bash
cd /workspaces/care-suite
cat APPLY_INTAKE_OUTPUT_MIGRATION.sql | supabase db execute
```

## ğŸ”„ æ‰§è¡Œåéœ€è¦åšçš„äº‹

### 1. é‡æ–°åŠ è½½åº”ç”¨
åº”ç”¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½ï¼Œæˆ–è€…æ‰‹åŠ¨åˆ·æ–°ï¼š
- åœ¨ Expo ç»ˆç«¯æŒ‰ `r` é”®é‡æ–°åŠ è½½

### 2. æµ‹è¯•å‡ºå…¥é‡åŠŸèƒ½
1. æ‰“å¼€æ‚£è€…æŠ¤ç†è®°å½•
2. ç‚¹å‡»"å‡ºå…¥é‡"é€‰é¡¹å¡
3. ç‚¹å‡»ä»»æ„æ—¶æ®µ (å¦‚ 08:00)
4. åº”è¯¥èƒ½æ­£å¸¸æ‰“å¼€æ¨¡æ€æ¡†

### 3. å¦‚æœä»æœ‰é—®é¢˜
æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æˆ– React Native æ—¥å¿—ï¼ŒæŸ¥æ‰¾å…¶ä»–é”™è¯¯ã€‚

## ğŸ“Š æ•°æ®è¿ç§»è¯´æ˜

æ‰§è¡Œè¿ç§»åï¼š
- âœ… `time_slot` å­—æ®µå·²æ·»åŠ 
- âœ… ç°æœ‰ `hour_slot` æ•°æ®å·²è½¬æ¢ä¸º `time_slot` æ ¼å¼
  - ä¾‹å¦‚: `hour_slot = 8` â†’ `time_slot = '08:00'`
- âœ… åˆ›å»ºäº† `intake_items` å’Œ `output_items` è¡¨
- âœ… æ—§çš„ JSONB å­—æ®µä¿ç•™ï¼Œç”¨äºå‘åå…¼å®¹

## ğŸ¯ ä¸‹ä¸€æ­¥

è¿ç§»æˆåŠŸåï¼Œæ‚¨å¯ä»¥ï¼š
1. ä½¿ç”¨æ–°çš„åŠ¨æ€é¡¹ç›®åŠŸèƒ½
2. åœ¨å‡ºå…¥é‡æ¨¡æ€æ¡†ä¸­æ·»åŠ å¤šä¸ªé¡¹ç›®
3. äº«å—æ›´çµæ´»çš„æ•°æ®ç»“æ„

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½æ•°æ®**: åœ¨ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œå‰ï¼Œå»ºè®®å…ˆå¤‡ä»½æ•°æ®
2. **æµ‹è¯•ç¯å¢ƒ**: å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
3. **å‘åå…¼å®¹**: æ—§çš„ JSONB å­—æ®µä»ç„¶ä¿ç•™ï¼Œä¸ä¼šå½±å“ç°æœ‰æ•°æ®

## ğŸ†˜ å¦‚æœé‡åˆ°é—®é¢˜

1. **æ£€æŸ¥ Supabase æƒé™**: ç¡®ä¿æœ‰æ‰§è¡Œ DDL çš„æƒé™
2. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**: Supabase Dashboard â†’ Logs
3. **å›æ»š**: å¦‚æœéœ€è¦å›æ»šï¼Œåˆ é™¤æ–°æ·»åŠ çš„å­—æ®µå’Œè¡¨å³å¯

---

**æ‰§è¡Œæ—¶é—´**: çº¦ 5-10 ç§’
**å½±å“èŒƒå›´**: `intake_output_records`, `intake_items`, `output_items` è¡¨
**çŠ¶æ€**: ç­‰å¾…æ‰§è¡Œ
