import AsyncStorage from '@react-native-async-storage/async-storage';
import { eventBus } from './eventBus';
import React from 'react';

export type Language = 'zh-TW' | 'zh-CN' | 'en';

const LANGUAGE_KEY = 'app_language';

// 繁簡轉換映射表 (包含護理專業術語與通用規範漢字)
const traditionalToSimplified: Record<string, string> = {
   // --- 通用規範漢字補充 (按拼音/頻率結構整理) ---
  // A
  '愛': '爱', '礙': '碍', '骯': '肮', '襖': '袄',
  // B
  '霸': '霸', '罷': '罢', '壩': '坝', '白': '白', '百': '百', '擺': '摆', '敗': '败', '頒': '颁', '辦': '办',
  '絆': '绊', '幫': '帮', '綁': '绑', '榜': '榜', '膀': '膀', '鎊': '镑', '包': '包', '報': '报', '飽': '饱',
  '寶': '宝', '貝': '贝', '輩': '辈', '狽': '狈', '筆': '笔', '畢': '毕', '幣': '币', '閉': '闭', '邊': '边',
  '變': '变', '標準': '标准', '飆': '飙', '錶': '表', '賓': '宾', '濱': '滨', '冰': '冰', '兵': '兵', '併': '并',
  '撥': '拨', '波': '波', '博': '博', '蔔': '卜', '補': '补', '布': '布', '步': '步',
  // C
  '才': '才', '財': '财', '參': '参', '蠶': '蚕', '殘': '残', '慚': '惭', '慘': '惨', '燦': '灿', '蒼': '苍',
  '艙': '舱', '倉': '仓', '滄': '沧', '測': '测', '層': '层', '叉': '叉', '插': '插', '查': '查', '茶': '茶',
  '詫': '诧', '拆': '拆', '柴': '柴', '長': '长', '廠': '厂', '場': '场', '嘗': '尝', '償': '偿', '暢': '畅',
  '鈔': '钞', '車': '车', '徹': '彻', '塵': '尘', '陳': '陈', '襯': '衬', '稱': '称', '誠': '诚', '承': '承',
  '懲': '惩', '癡': '痴', '遲': '迟', '馳': '驰', '恥': '耻', '齒': '齿', '赤': '赤', '衝': '冲', '蟲': '虫',
  '寵': '宠', '抽': '抽', '醜': '丑', '處': '处', '觸': '触', '川': '川', '穿': '穿', '傳': '传', '船': '船',
  '喘': '喘', '串': '串', '窗': '窗', '床': '床', '創': '创', '吹': '吹', '錘': '锤', '春': '春', '純': '纯',
  '脣': '唇', '淳': '淳', '辭': '辞', '詞': '词', '賜': '赐', '蔥': '葱', '從': '从', '叢': '丛', '湊': '凑',
  '粗': '粗', '促': '促', '躥': '蹿', '催': '催', '村': '村', '存': '存', '寸': '寸', '錯': '错',
  // D
  '搭': '搭', '達': '达', '答': '答', '打': '打', '大': '大', '呆': '呆', '貸': '贷', '袋': '袋', '帶': '带',
  '丹': '丹', '單': '单', '擔': '担', '膽': '胆', '但': '但', '淡': '淡', '蛋': '蛋', '當': '当', '擋': '挡',
  '黨': '党', '盪': '荡', '導': '导', '島': '岛', '倒': '倒', '搗': '捣', '禱': '祷', '道': '道', '稻': '稻',
  '得': '得', '德': '德', '燈': '灯', '鄧': '邓', '敵': '敌', '滌': '涤', '抵': '抵', '底': '底', '地': '地',
  '弟': '弟', '帝': '帝', '遞': '递', '點': '点', '典': '典', '店': '店', '墊': '垫', '澱': '淀', '雕': '雕',
  '吊': '吊', '釣': '钓', '調': '调', '跌': '跌', '疊': '叠', '頂': '顶', '訂': '订', '釘': '钉', '定': '定',
  '丟': '丢', '東': '东', '冬': '冬', '董': '董', '懂': '懂', '動': '动', '棟': '栋', '鬥': '斗', '豆': '豆',
  '獨': '独', '讀': '读', '賭': '赌', '杜': '杜', '度': '度', '端': '端', '短': '短', '斷': '断', '緞': '缎',
  '鍛': '锻', '隊': '队', '對': '对', '兌': '兑', '敦': '敦', '噸': '吨', '蹲': '蹲', '頓': '顿', '多': '多',
  '奪': '夺', '朵': '朵', '躲': '躲',
  // E & F
  '鵝': '鹅', '額': '额', '惡': '恶', '餓': '饿', '兒': '儿', '爾': '尔', '耳': '耳', '二': '二', '貳': '贰',
  '發': '发', '罰': '罚', '法': '法', '帆': '帆', '番': '番', '凡': '凡', '煩': '烦', '繁': '繁', '反': '反',
  '飯': '饭', '範': '范', '販': '贩', '方': '方', '芳': '芳', '防': '防', '訪': '访', '彷': '仿', '紡': '纺',
  '放': '放', '飛': '飞', '非': '非', '肥': '肥', '廢': '废', '費': '费', '肺': '肺', '分': '分', '紛': '纷',
  '芬': '芬', '墳': '坟', '粉': '粉', '份': '份', '奮': '奋', '憤': '愤', '糞': '粪', '豐': '丰', '風': '风',
  '楓': '枫', '瘋': '疯', '封': '封', '峰': '峰', '鋒': '锋', '逢': '逢', '縫': '缝', '諷': '讽', '鳳': '凤',
  '奉': '奉', '佛': '佛', '否': '否', '夫': '夫', '膚': '肤', '扶': '扶', '服': '服', '俘': '俘', '浮': '浮',
  '符': '符', '幅': '幅', '福': '福', '撫': '抚', '府': '府', '父': '父', '付': '付', '婦': '妇', '負': '负',
  '附': '附', '復': '复', '複': '复', '赴': '赴', '副': '副', '傅': '傅', '富': '富', '賦': '赋',
  // G
  '該': '该', '改': '改', '鈣': '钙', '蓋': '盖', '干': '干', '杆': '杆', '趕': '赶', '敢': '敢', '感': '感',
  '岡': '冈', '剛': '刚', '崗': '岗', '鋼': '钢', '港': '港', '高': '高', '膏': '膏', '告': '告', '哥': '哥',
  '歌': '歌', '擱': '搁', '割': '割', '革': '革', '格': '格', '葛': '葛', '隔': '隔', '個': '个', '各': '各',
  '給': '给', '根': '根', '跟': '跟', '更': '更', '耕': '耕', '工': '工', '弓': '弓', '公': '公', '功': '功',
  '攻': '攻', '供': '供', '宮': '宫', '恭': '恭', '龔': '龚', '鞏': '巩', '共': '共', '貢': '贡', '鉤': '钩',
  '溝': '沟', '苟': '苟', '狗': '狗', '構': '构', '購': '购', '夠': '够', '估': '估', '古': '古', '骨': '骨',
  '鼓': '鼓', '固': '固', '故': '故', '顧': '顾', '瓜': '瓜', '刮': '刮', '掛': '挂', '怪': '怪', '關': '关',
  '觀': '观', '官': '官', '冠': '冠', '館': '馆', '管': '管', '貫': '贯', '慣': '惯', '灌': '灌', '光': '光',
  '廣': '广', '歸': '归', '龜': '龟', '規': '规', '閨': '闺', '軌': '轨', '鬼': '鬼', '櫃': '柜', '貴': '贵',
  '桂': '桂', '滾': '滚', '棍': '棍', '郭': '郭', '國': '国', '果': '果', '裹': '裹', '過': '过',
  // H
  '哈': '哈', '孩': '孩', '海': '海', '害': '害', '含': '含', '韓': '韩', '寒': '寒', '喊': '喊', '漢': '汉',
  '汗': '汗', '旱': '旱', '杭': '杭', '航': '航', '毫': '毫', '豪': '豪', '好': '好', '號': '号', '耗': '耗',
  '呵': '呵', '喝': '喝', '禾': '禾', '合': '合', '何': '何', '和': '和', '河': '河', '核': '核', '荷': '荷',
  '盒': '盒', '賀': '贺', '黑': '黑', '痕': '痕', '很': '很', '狠': '狠', '恨': '恨', '恆': '恒', '橫': '横',
  '衡': '衡', '轟': '轰', '哄': '哄', '紅': '红', '宏': '宏', '洪': '洪', '虹': '虹', '鴻': '鸿', '侯': '侯',
  '猴': '猴', '喉': '喉', '吼': '吼', '後': '后', '厚': '厚', '候': '候', '乎': '乎', '呼': '呼', '忽': '忽',
  '狐': '狐', '胡': '胡', '壺': '壶', '湖': '湖', '糊': '糊', '虎': '虎', '護': '护', '互': '互', '戶': '户',
  '花': '花', '華': '华', '嘩': '哗', '滑': '滑', '話': '话', '畫': '画', '化': '化', '划': '划', '懷': '怀',
  '壞': '坏', '歡': '欢', '還': '还', '環': '环', '緩': '缓', '幻': '幻', '喚': '唤', '換': '换', '患': '患',
  '荒': '荒', '慌': '慌', '皇': '皇', '黃': '黄', '煌': '煌', '晃': '晃', '灰': '灰', '恢': '恢', '揮': '挥',
  '輝': '辉', '回': '回', '悔': '悔', '匯': '汇', '會': '会', '繪': '绘', '賄': '贿', '穢': '秽', '婚': '婚',
  '昏': '昏', '渾': '浑', '魂': '魂', '混': '混', '活': '活', '火': '火', '伙': '伙', '或': '或', '貨': '货',
  '獲': '获', '禍': '祸',
  // J
  '擊': '击', '飢': '饥', '機': '机', '積': '积', '雞': '鸡', '跡': '迹', '績': '绩', '激': '激', '及': '及',
  '吉': '吉', '級': '级', '即': '即', '極': '极', '急': '急', '疾': '疾', '集': '集', '籍': '籍', '幾': '几',
  '己': '己', '擠': '挤', '脊': '脊', '計': '计', '記': '记', '紀': '纪', '技': '技', '忌': '忌', '際': '际',
  '季': '季', '劑': '剂', '濟': '济', '繼': '继', '寄': '寄', '寂': '寂', '加': '加', '夾': '夹', '佳': '佳',
  '家': '家', '嘉': '嘉', '甲': '甲', '賈': '贾', '價': '价', '駕': '驾', '架': '架', '假': '假', '尖': '尖',
  '堅': '坚', '間': '间', '肩': '肩', '艱': '艰', '監': '监', '兼': '兼', '減': '减', '剪': '剪', '檢': '检',
  '簡': '简', '鹼': '碱', '見': '见', '件': '件', '建': '建', '劍': '剑', '健': '健', '艦': '舰', '漸': '渐',
  '踐': '践', '鑑': '鉴', '鍵': '键', '江': '江', '姜': '姜', '將': '将', '漿': '浆', '僵': '僵', '疆': '疆',
  '講': '讲', '獎': '奖', '蔣': '蒋', '匠': '匠', '降': '降', '交': '交', '郊': '郊', '嬌': '娇', '澆': '浇',
  '驕': '骄', '膠': '胶', '焦': '焦', '蛟': '蛟', '角': '角', '腳': '脚', '攪': '搅', '叫': '叫', '轎': '轿',
  '較': '较', '教': '教', '階': '阶', '皆': '皆', '接': '接', '揭': '揭', '節': '节', '結': '结', '潔': '洁',
  '傑': '杰', '捷': '捷', '姐': '姐', '解': '解', '介': '介', '戒': '戒', '屆': '届', '界': '界', '借': '借',
  '巾': '巾', '今': '今', '斤': '斤', '金': '金', '津': '津', '筋': '筋', '僅': '仅', '緊': '紧', '錦': '锦',
  '盡': '尽', '勁': '劲', '近': '近', '進': '进', '晉': '晋', '浸': '浸', '禁': '禁', '京': '京', '經': '经',
  '莖': '茎', '驚': '惊', '晶': '晶', '睛': '睛', '精': '精', '鯨': '鲸', '井': '井', '頸': '颈', '景': '景',
  '警': '警', '淨': '净', '徑': '径', '競': '竞', '竟': '竟', '敬': '敬', '靜': '静', '境': '境', '鏡': '镜',
  '糾': '纠', '究': '究', '久': '久', '酒': '酒', '舊': '旧', '救': '救', '就': '就', '居': '居', '局': '局',
  '菊': '菊', '橘': '橘', '舉': '举', '矩': '矩', '句': '句', '巨': '巨', '拒': '拒', '具': '具', '俱': '俱',
  '劇': '剧', '據': '据', '距': '距', '懼': '惧', '颶': '飓', '捐': '捐', '卷': '卷', '倦': '倦', '決': '决',
  '絕': '绝', '覺': '觉', '軍': '军', '君': '君', '均': '均', '菌': '菌', '俊': '俊',
  // K
  '卡': '卡', '開': '开', '凱': '凯', '慨': '慨', '刊': '刊', '堪': '堪', '看': '看', '康': '康', '抗': '抗',
  '考': '考', '烤': '烤', '靠': '靠', '科': '科', '棵': '棵', '顆': '颗', '殼': '壳', '咳': '咳', '可': '可',
  '渴': '渴', '克': '克', '刻': '刻', '客': '客', '課': '课', '肯': '肯', '墾': '垦', '懇': '恳', '坑': '坑',
  '空': '空', '孔': '孔', '恐': '恐', '控': '控', '口': '口', '扣': '扣', '寇': '寇', '枯': '枯', '哭': '哭',
  '苦': '苦', '庫': '库', '褲': '裤', '酷': '酷', '誇': '夸', '跨': '跨', '塊': '块', '快': '快', '寬': '宽',
  '款': '款', '框': '框', '礦': '矿', '況': '况', '虧': '亏', '盔': '盔', '葵': '葵', '愧': '愧', '潰': '溃',
  '昆': '昆', '捆': '捆', '困': '困', '擴': '扩', '闊': '阔',
  // L
  '垃': '垃', '拉': '拉', '啦': '啦', '喇': '喇', '臘': '腊', '蠟': '蜡', '辣': '辣', '來': '来', '賴': '赖',
  '蘭': '兰', '攔': '拦', '欄': '栏', '藍': '蓝', '籃': '篮', '覽': '览', '懶': '懒', '爛': '烂', '濫': '滥',
  '郎': '郎', '狼': '狼', '浪': '浪', '撈': '捞', '勞': '劳', '牢': '牢', '老': '老', '姥': '姥', '澇': '涝',
  '樂': '乐', '勒': '勒', '雷': '雷', '類': '类', '淚': '泪', '累': '累', '冷': '冷', '釐': '厘', '梨': '梨',
  '離': '离', '黎': '黎', '禮': '礼', '李': '李', '里': '里', '理': '理', '力': '力', '曆': '历', '歷': '历',
  '厲': '厉', '立': '立', '麗': '丽', '勵': '励', '利': '利', '例': '例', '隸': '隶', '粒': '粒', '栗': '栗',
  '連': '连', '簾': '帘', '憐': '怜', '蓮': '莲', '聯': '联', '廉': '廉', '鐮': '镰', '臉': '脸', '練': '练',
  '煉': '炼', '戀': '恋', '鏈': '链', '涼': '凉', '糧': '粮', '梁': '梁', '兩': '两', '亮': '亮', '諒': '谅',
  '輛': '辆', '遼': '辽', '療': '疗', '聊': '聊', '了': '了', '獵': '猎', '列': '列', '烈': '烈', '裂': '裂',
  '鄰': '邻', '林': '林', '臨': '临', '淋': '淋', '靈': '灵', '嶺': '岭', '鈴': '铃', '零': '零', '領': '领',
  '令': '令', '另': '另', '流': '流', '留': '留', '劉': '刘', '柳': '柳', '六': '六', '龍': '龙', '聾': '聋',
  '籠': '笼', '隆': '隆', '壟': '垄', '攏': '拢', '樓': '楼', '漏': '漏', '露': '露', '蘆': '芦', '盧': '卢',
  '爐': '炉', '魯': '鲁', '陸': '陆', '錄': '录', '鹿': '鹿', '碌': '碌', '路': '路', '驢': '驴', '旅': '旅',
  '鋁': '铝', '履': '履', '律': '律', '慮': '虑', '率': '率', '綠': '绿', '氯': '氯', '濾': '滤', '卵': '卵',
  '亂': '乱', '掠': '掠', '略': '略', '倫': '伦', '輪': '轮', '論': '论', '羅': '罗', '蘿': '萝', '鑼': '锣',
  '落': '落', '洛': '洛', '駱': '骆',
  // M
  '媽': '妈', '麻': '麻', '馬': '马', '瑪': '玛', '碼': '码', '螞': '蚂', '罵': '骂', '嗎': '吗', '買': '买',
  '麥': '麦', '賣': '卖', '邁': '迈', '脈': '脉', '瞞': '瞒', '饅': '馒', '滿': '满', '慢': '慢', '漫': '漫',
  '忙': '忙', '芒': '芒', '盲': '盲', '茫': '茫', '貓': '猫', '毛': '毛', '矛': '矛', '茅': '茅', '錨': '锚',
  '貌': '貌', '貿': '贸', '帽': '帽', '麼': '么', '沒': '没', '枚': '枚', '媒': '媒', '眉': '眉', '梅': '梅',
  '煤': '煤', '霉': '霉', '每': '每', '美': '美', '妹': '妹', '門': '门', '悶': '闷', '們': '们', '萌': '萌',
  '蒙': '蒙', '猛': '猛', '夢': '梦', '彌': '弥', '迷': '迷', '謎': '谜', '米': '米', '密': '密', '蜜': '蜜',
  '眠': '眠', '綿': '绵', '免': '免', '勉': '勉', '面': '面', '苗': '苗', '描': '描', '秒': '秒', '妙': '妙',
  '廟': '庙', '滅': '灭', '民': '民', '敏': '敏', '名': '名', '明': '明', '鳴': '鸣', '命': '命', '謬': '谬',
  '摸': '摸', '模': '模', '膜': '膜', '摩': '摩', '磨': '磨', '蘑': '蘑', '魔': '魔', '抹': '抹', '末': '末',
  '沫': '沫', '莫': '莫', '漠': '漠', '墨': '墨', '默': '默', '謀': '谋', '某': '某', '母': '母', '畝': '亩',
  '木': '木', '目': '目', '牧': '牧', '墓': '墓', '幕': '幕', '慕': '慕',
  // N
  '拿': '拿', '哪': '哪', '內': '内', '那': '那', '納': '纳', '乃': '乃', '奶': '奶', '耐': '耐', '男': '男',
  '南': '南', '難': '难', '囊': '囊', '撓': '挠', '腦': '脑', '惱': '恼', '鬧': '闹', '呢': '呢', '餒': '馁',
  '嫩': '嫩', '能': '能', '泥': '泥', '你': '你', '年': '年', '攆': '撵', '念': '念', '娘': '娘', '釀': '酿',
  '鳥': '鸟', '尿': '尿', '捏': '捏', '您': '您', '寧': '宁', '擰': '拧', '凝': '凝', '牛': '牛', '扭': '扭',
  '紐': '纽', '農': '农', '濃': '浓', '弄': '弄', '奴': '奴', '努': '努', '怒': '怒', '女': '女', '暖': '暖',
  '虐': '虐', '瘧': '疟',
  // O & P
  '歐': '欧', '偶': '偶', '嘔': '呕', '爬': '爬', '帕': '帕', '怕': '怕', '拍': '拍', '排': '排', '牌': '牌',
  '派': '派', '攀': '攀', '盤': '盘', '判': '判', '盼': '盼', '龐': '庞', '旁': '旁', '胖': '胖', '拋': '抛',
  '炮': '炮', '跑': '跑', '泡': '泡', '陪': '陪', '培': '培', '賠': '赔', '佩': '佩', '配': '配', '噴': '喷',
  '盆': '盆', '朋': '朋', '棚': '棚', '蓬': '蓬', '鵬': '鹏', '捧': '捧', '碰': '碰', '批': '批', '披': '披',
  '皮': '皮', '疲': '疲', '脾': '脾', '匹': '匹', '屁': '屁', '闢': '辟', '片': '片', '偏': '偏', '篇': '篇',
  '騙': '骗', '漂': '漂', '飄': '飘', '票': '票', '貧': '贫', '頻': '频', '品': '品', '平': '平', '評': '评',
  '憑': '凭', '蘋': '萍', '瓶': '瓶', '坡': '坡', '頗': '颇', '婆': '婆', '破': '破', '魄': '魄', '剖': '剖',
  '僕': '仆', '撲': '扑', '鋪': '铺', '葡': '葡', '蒲': '蒲', '樸': '朴', '普': '普', '譜': '谱',
  // Q
  '七': '七', '妻': '妻', '淒': '凄', '期': '期', '欺': '欺', '漆': '漆', '齊': '齐', '其': '其', '奇': '奇',
  '歧': '歧', '騎': '骑', '棋': '棋', '旗': '旗', '企': '企', '豈': '岂', '啟': '启', '起': '起', '氣': '气',
  '棄': '弃', '汽': '汽', '契': '契', '砌': '砌', '器': '器', '恰': '恰', '千': '千', '遷': '迁', '牽': '牵',
  '簽': '签', '謙': '谦', '錢': '钱', '鉗': '钳', '前': '前', '潛': '潜', '淺': '浅', '遣': '遣', '欠': '欠',
  '槍': '枪', '腔': '腔', '強': '强', '牆': '墙', '搶': '抢', '悄': '悄', '橋': '桥', '喬': '乔', '僑': '侨',
  '巧': '巧', '切': '切', '茄': '茄', '且': '且', '竊': '窃', '親': '亲', '侵': '侵', '欽': '钦', '琴': '琴',
  '勤': '勤', '寢': '寝', '青': '青', '輕': '轻', '氫': '氢', '傾': '倾', '清': '清', '情': '情', '晴': '晴',
  '請': '请', '慶': '庆', '窮': '穷', '丘': '丘', '秋': '秋', '球': '球', '區': '区', '曲': '曲', '驅': '驱',
  '屈': '屈', '趨': '趋', '渠': '渠', '取': '取', '去': '去', '趣': '趣', '圈': '圈', '全': '全', '權': '权',
  '泉': '泉', '拳': '拳', '勸': '劝', '缺': '缺', '確': '确', '雀': '雀', '裙': '裙', '群': '群',
  // R
  '然': '然', '燃': '燃', '染': '染', '壤': '壤', '讓': '让', '擾': '扰', '饒': '饶', '惹': '惹', '熱': '热',
  '人': '人', '仁': '仁', '忍': '忍', '認': '认', '任': '任', '扔': '扔', '仍': '仍', '日': '日', '絨': '绒',
  '容': '容', '榮': '荣', '融': '融', '柔': '柔', '肉': '肉', '如': '如', '儒': '儒', '乳': '乳', '辱': '辱',
  '入': '入', '軟': '软', '銳': '锐', '瑞': '瑞', '潤': '润', '若': '若', '弱': '弱',
  // S
  '撒': '撒', '灑': '洒', '薩': '萨', '塞': '塞', '賽': '赛', '三': '三', '傘': '伞', '散': '散', '桑': '桑',
  '嗓': '嗓', '喪': '丧', '掃': '扫', '嫂': '嫂', '色': '色', '森': '森', '殺': '杀', '沙': '沙', '紗': '纱',
  '傻': '傻', '篩': '筛', '曬': '晒', '山': '山', '刪': '删', '杉': '杉', '衫': '衫', '珊': '珊', '閃': '闪',
  '陝': '陕', '扇': '扇', '善': '善', '膳': '膳', '傷': '伤', '商': '商', '賞': '赏', '上': '上', '尚': '尚',
  '梢': '梢', '燒': '烧', '稍': '稍', '少': '少', '紹': '绍', '哨': '哨', '舌': '舌', '蛇': '蛇', '舍': '舍',
  '設': '设', '社': '社', '射': '射', '涉': '涉', '攝': '摄', '申': '申', '伸': '伸', '身': '身', '深': '深',
  '神': '神', '審': '审', '嬸': '婶', '腎': '肾', '甚': '甚', '滲': '渗', '慎': '慎', '生': '生', '聲': '声',
  '升': '升', '牲': '牲', '繩': '绳', '省': '省', '聖': '圣', '勝': '胜', '剩': '剩', '屍': '尸', '失': '失',
  '師': '师', '詩': '诗', '獅': '狮', '施': '施', '濕': '湿', '十': '十', '什': '什', '石': '石', '時': '时',
  '識': '识', '實': '实', '拾': '拾', '蝕': '蚀', '食': '食', '史': '史', '使': '使', '始': '始', '駛': '驶',
  '士': '士', '氏': '氏', '世': '世', '市': '市', '示': '示', '式': '式', '事': '事', '侍': '侍', '勢': '势',
  '視': '视', '試': '试', '飾': '饰', '室': '室', '是': '是', '適': '适', '釋': '释', '收': '收', '手': '手',
  '守': '守', '首': '首', '壽': '寿', '受': '受', '授': '授', '售': '售', '獸': '兽', '瘦': '瘦', '書': '书',
  '叔': '叔', '殊': '殊', '梳': '梳', '舒': '舒', '疏': '疏', '輸': '输', '蔬': '蔬', '熟': '熟', '暑': '暑',
  '屬': '属', '鼠': '鼠', '薯': '薯', '術': '术', '束': '束', '述': '述', '樹': '树', '豎': '竖', '數': '数',
  '刷': '刷', '耍': '耍', '衰': '衰', '摔': '摔', '甩': '甩', '帥': '帅', '雙': '双', '霜': '霜', '爽': '爽',
  '誰': '谁', '水': '水', '稅': '税', '睡': '睡', '順': '顺', '說': '说', '碩': '硕', '絲': '丝', '司': '司',
  '私': '私', '思': '思', '斯': '斯', '撕': '撕', '死': '死', '四': '四', '似': '似', '寺': '寺', '飼': '饲',
  '肆': '肆', '松': '松', '鬆': '松', '送': '送', '宋': '宋', '頌': '颂', '搜': '搜', '艘': '艘', '蘇': '苏',
  '俗': '俗', '訴': '诉', '肅': '肃', '素': '素', '速': '速', '塑': '塑', '酸': '酸', '算': '算', '雖': '虽',
  '隨': '随', '髓': '髓', '歲': '岁', '孫': '孙', '損': '损', '筍': '笋', '縮': '缩', '所': '所', '索': '索',
  '鎖': '锁',
  // T
  '他': '他', '它': '它', '她': '她', '塔': '塔', '踏': '踏', '台': '台', '檯': '台', '颱': '台', '抬': '抬',
  '太': '太', '態': '态', '泰': '泰', '貪': '贪', '攤': '摊', '灘': '滩', '壇': '坛', '談': '谈', '痰': '痰',
  '坦': '坦', '毯': '毯', '歎': '叹', '炭': '炭', '探': '探', '湯': '汤', '唐': '唐', '堂': '堂', '塘': '塘',
  '糖': '糖', '躺': '躺', '燙': '烫', '濤': '涛', '掏': '掏', '桃': '桃', '逃': '逃', '陶': '陶', '討': '讨',
  '套': '套', '特': '特', '藤': '藤', '騰': '腾', '疼': '疼', '梯': '梯', '踢': '踢', '啼': '啼', '提': '提',
  '題': '题', '蹄': '蹄', '體': '体', '剃': '剃', '天': '天', '添': '添', '田': '田', '甜': '甜', '填': '填',
  '挑': '挑', '條': '条', '跳': '跳', '貼': '贴', '鐵': '铁', '廳': '厅', '聽': '听', '亭': '亭', '庭': '庭',
  '停': '停', '挺': '挺', '通': '通', '同': '同', '桐': '桐', '銅': '铜', '童': '童', '統': '统', '桶': '桶',
  '筒': '筒', '痛': '痛', '偷': '偷', '頭': '头', '投': '投', '透': '透', '禿': '秃', '突': '突', '圖': '图',
  '徒': '徒', '塗': '涂', '途': '途', '屠': '屠', '土': '土', '吐': '吐', '兔': '兔', '團': '团', '推': '推',
  '腿': '腿', '退': '退', '吞': '吞', '托': '托', '拖': '拖', '脫': '脱', '駝': '驼', '妥': '妥', '橢': '椭',
  // W
  '挖': '挖', '哇': '哇', '蛙': '蛙', '瓦': '瓦', '襪': '袜', '歪': '歪', '外': '外', '彎': '弯', '灣': '湾',
  '丸': '丸', '完': '完', '玩': '玩', '頑': '顽', '挽': '挽', '晚': '晚', '碗': '碗', '萬': '万', '汪': '汪',
  '亡': '亡', '王': '王', '網': '网', '往': '往', '妄': '妄', '忘': '忘', '旺': '旺', '望': '望', '危': '危',
  '威': '威', '微': '微', '為': '为', '圍': '围', '違': '违', '唯': '唯', '維': '维', '偉': '伟', '偽': '伪',
  '尾': '尾', '緯': '纬', '委': '委', '衛': '卫', '未': '未', '位': '位', '味': '味', '胃': '胃', '謂': '谓',
  '餵': '喂', '溫': '温', '文': '文', '紋': '纹', '聞': '闻', '蚊': '蚊', '穩': '稳', '問': '问', '翁': '翁',
  '窩': '窝', '我': '我', '握': '握', '臥': '卧', '烏': '乌', '污': '污', '屋': '屋', '無': '无', '吳': '吴',
  '五': '五', '午': '午', '伍': '伍', '武': '武', '舞': '舞', '務': '务', '物': '物', '誤': '误', '悟': '悟',
  '霧': '雾',
  // X
  '夕': '夕', '西': '西', '吸': '吸', '希': '希', '稀': '稀', '息': '息', '悉': '悉', '惜': '惜', '析': '析',
  '犧': '牺', '溪': '溪', '熄': '熄', '膝': '膝', '習': '习', '席': '席', '襲': '袭', '洗': '洗', '喜': '喜',
  '戲': '戏', '系': '系', '細': '细', '隙': '隙', '蝦': '虾', '瞎': '瞎', '峽': '峡', '狹': '狭', '俠': '侠',
  '下': '下', '夏': '夏', '嚇': '吓', '掀': '掀', '先': '先', '纖': '纤', '仙': '仙', '鮮': '鲜', '閒': '闲',
  '賢': '贤', '弦': '弦', '咸': '咸', '銜': '衔', '嫌': '嫌', '顯': '显', '險': '险', '縣': '县', '現': '现',
  '限': '限', '線': '线', '憲': '宪', '陷': '陷', '獻': '献', '鄉': '乡', '相': '相', '香': '香', '廂': '厢',
  '箱': '箱', '詳': '详', '祥': '祥', '翔': '翔', '享': '享', '響': '响', '想': '想', '向': '向', '巷': '巷',
  '項': '项', '象': '象', '像': '像', '橡': '橡', '消': '消', '蕭': '萧', '銷': '销', '小': '小', '曉': '晓',
  '孝': '孝', '校': '校', '笑': '笑', '效': '效', '些': '些', '歇': '歇', '協': '协', '鞋': '鞋', '寫': '写',
  '謝': '谢', '械': '械', '蟹': '蟹', '心': '心', '辛': '辛', '新': '新', '信': '信', '興': '兴', '星': '星',
  '猩': '猩', '刑': '刑', '行': '行', '形': '形', '型': '型', '醒': '醒', '杏': '杏', '姓': '姓', '幸': '幸',
  '性': '性', '兄': '兄', '凶': '凶', '胸': '胸', '雄': '雄', '熊': '熊', '休': '休', '修': '修', '羞': '羞',
  '朽': '朽', '秀': '秀', '繡': '绣', '袖': '袖', '須': '须', '虛': '虚', '需': '需', '徐': '徐', '許': '许',
  '序': '序', '敘': '叙', '緒': '绪', '續': '续', '絮': '絮', '蓄': '蓄', '宣': '宣', '懸': '悬', '旋': '旋',
  '選': '选', '穴': '穴', '學': '学', '雪': '雪', '血': '血', '尋': '寻', '巡': '巡', '詢': '询', '循': '循',
  '訓': '训', '訊': '讯', '迅': '迅',
  // Y
  '壓': '压', '鴉': '鸦', '鴨': '鸭', '牙': '牙', '芽': '芽', '崖': '崖', '啞': '哑', '雅': '雅', '亞': '亚',
  '煙': '烟', '鹽': '盐', '嚴': '严', '研': '研', '岩': '岩', '延': '延', '言': '言', '顏': '颜', '炎': '炎',
  '沿': '沿', '演': '演', '掩': '掩', '眼': '眼', '衍': '衍', '厭': '厌', '硯': '砚', '雁': '雁', '燕': '燕',
  '驗': '验', '央': '央', '揚': '扬', '羊': '羊', '陽': '阳', '楊': '杨', '洋': '洋', '養': '养', '樣': '样',
  '腰': '腰', '邀': '邀', '咬': '咬', '藥': '药', '要': '要', '耀': '耀', '爺': '爷', '也': '也', '冶': '冶',
  '野': '野', '業': '业', '葉': '叶', '頁': '页', '夜': '夜', '液': '液', '一': '一', '衣': '衣', '醫': '医',
  '依': '依', '儀': '仪', '宜': '宜', '姨': '姨', '移': '移', '遺': '遗', '疑': '疑', '乙': '乙', '已': '已',
  '以': '以', '蟻': '蚁', '倚': '倚', '椅': '椅', '義': '义', '億': '亿', '憶': '忆', '藝': '艺', '議': '议',
  '亦': '亦', '異': '异', '役': '役', '譯': '译', '易': '易', '益': '益', '誼': '谊', '意': '意', '毅': '毅',
  '翼': '翼', '因': '因', '陰': '阴', '音': '音', '銀': '银', '引': '引', '飲': '饮', '隱': '隐', '印': '印',
  '英': '英', '櫻': '樱', '嬰': '婴', '鷹': '鹰', '應': '应', '瑩': '莹', '營': '营', '迎': '迎', '贏': '赢',
  '盈': '盈', '影': '影', '映': '映', '硬': '硬', '傭': '佣', '擁': '拥', '庸': '庸', '永': '永', '詠': '咏',
  '泳': '泳', '勇': '勇', '湧': '涌', '用': '用', '優': '优', '憂': '忧', '悠': '悠', '尤': '尤', '由': '由',
  '郵': '邮', '猶': '犹', '油': '油', '游': '游', '友': '友', '有': '有', '又': '又', '右': '右', '幼': '幼',
  '誘': '诱', '於': '于', '余': '余', '魚': '鱼', '娛': '娱', '漁': '渔', '愉': '愉', '愚': '愚', '與': '与',
  '語': '语', '羽': '羽', '玉': '玉', '域': '域', '遇': '遇', '御': '御', '愈': '愈', '欲': '欲', '獄': '狱',
  '育': '育', '譽': '誉', '浴': '浴', '預': '预', '元': '元', '園': '园', '原': '原', '圓': '圆', '員': '员',
  '援': '援', '緣': '缘', '源': '源', '遠': '远', '怨': '怨', '院': '院', '願': '愿', '約': '约', '月': '月',
  '閱': '阅', '悅': '悦', '躍': '跃', '越': '越', '雲': '云', '勻': '匀', '允': '允', '孕': '孕',
  '運': '运', '暈': '晕',
  // Z
  '雜': '杂', '災': '灾', '載': '载', '在': '在', '再': '再', '咱': '咱', '暫': '暂', '讚': '赞', '臟': '脏',
  '葬': '葬', '遭': '遭', '糟': '糟', '早': '早', '棗': '枣', '澡': '澡', '造': '造', '噪': '燥', '躁': '躁',
  '責': '责', '擇': '择', '則': '则', '澤': '泽', '賊': '贼', '怎': '怎', '曾': '曾', '增': '增', '贈': '赠',
  '扎': '扎', '渣': '渣', '閘': '闸', '眨': '眨', '詐': '诈', '摘': '摘', '宅': '宅', '債': '债', '沾': '沾',
  '粘': '粘', '展': '展', '盞': '盏', '嶄': '崭', '戰': '战', '站': '站', '佔': '占', '張': '张', '章': '章',
  '漲': '涨', '掌': '掌', '丈': '丈', '仗': '仗', '帳': '帐', '脹': '胀', '障': '障', '招': '招', '昭': '昭',
  '找': '找', '沼': '沼', '趙': '赵', '照': '照', '罩': '罩', '兆': '兆', '哲': '哲', '折': '折', '者': '者',
  '這': '这', '浙': '浙', '貞': '贞', '針': '针', '偵': '侦', '珍': '珍', '真': '真', '診': '诊', '枕': '枕',
  '陣': '阵', '振': '振', '鎮': '镇', '震': '震', '爭': '争', '征': '征', '掙': '挣', '睜': '睁', '蒸': '蒸',
  '整': '整', '正': '正', '證': '证', '鄭': '郑', '政': '政', '症': '症', '之': '之', '支': '支', '枝': '枝',
  '隻': '只', '脂': '脂', '織': '织', '直': '直', '植': '植', '值': '值', '職': '职', '止': '止', '只': '只',
  '紙': '纸', '指': '指', '至': '至', '志': '志', '制': '制', '治': '治', '致': '致', '秩': '秩', '智': '智',
  '置': '置', '中': '中', '忠': '忠', '終': '终', '鐘': '钟', '腫': '肿', '種': '种', '眾': '众', '重': '重',
  '州': '州', '舟': '舟', '周': '周', '洲': '洲', '粥': '粥', '軸': '轴', '晝': '昼', '皺': '皱', '驟': '骤',
  '珠': '珠', '株': '株', '諸': '诸', '朱': '朱', '豬': '猪', '竹': '竹', '主': '主', '煮': '煮', '囑': '嘱',
  '住': '住', '助': '助', '注': '注', '駐': '驻', '祝': '祝', '著': '着', '柱': '柱', '抓': '抓', '爪': '爪',
  '專': '专', '磚': '砖', '轉': '转', '賺': '赚', '莊': '庄', '裝': '装', '壯': '壮', '狀': '状', '追': '追',
  '準': '准', '捉': '捉', '桌': '桌', '濁': '浊', '資': '资', '姿': '姿', '滋': '滋', '子': '子', '紫': '紫',
  '字': '字', '自': '自', '宗': '宗', '綜': '综', '總': '总', '縱': '纵', '走': '走', '奏': '奏', '租': '租',
  '足': '足', '族': '族', '祖': '祖', '組': '组', '阻': '阻', '鑽': '钻', '嘴': '嘴', '最': '最', '罪': '罪',
  '醉': '醉', '尊': '尊', '遵': '遵', '昨': '昨', '左': '左', '作': '作', '坐': '坐', '座': '座', '做': '做'
};

// 繁体转简体函数
export const convertToSimplified = (text: string): string => {
  return text.split('').map(char => traditionalToSimplified[char] || char).join('');
};

export const translations = {
  'zh-TW': {
    // 通用
    confirm: '確認',
    cancel: '取消',
    save: '儲存',
    delete: '刪除',
    edit: '編輯',
    back: '返回',
    loading: '載入中...',
    
    // 主頁面
    home: '首頁',
    careRecords: '護理記錄',
    settings: '設定',
    patients: '院友列表',
    
    // 院友卡片
    patientName: '院友姓名',
    bed: '床號',
    roomNumber: '房號',
    statusInHospital: '入院',
    statusOnLeave: '渡假',
    statusOutpatient: '外出',
    careLevel: '護理等級',
    fullCare: '全護理',
    partialCare: '半護理',
    selfCare: '自理',
    
    // 護理記錄頁面
    patrolRecord: '巡房記錄',
    diaperChange: '換片記錄',
    intakeOutput: '出入量',
    restraintObservation: '約束觀察',
    positionChange: '轉身記錄',
    toiletTraining: '如廁訓練',
    hygieneRecord: '衛生記錄',
    previousPatient: '上一位',
    nextPatient: '下一位',
    selectDate: '選擇日期',
    today: '今天',
    daily: '全天',
    
    // 出入量記錄
    intake: '攝入',
    output: '排出',
    hourlyRecord: '每小時記錄',
    hourSlot: '時段',
    // 攝入 - 餐膳
    meals: '餐膳',
    breakfast: '早餐',
    lunch: '午餐',
    afternoonTea: '下午茶',
    dinner: '晚餐',
    mealPortion: '份量',
    portion1_4: '1/4',
    portion2_4: '2/4',
    portion3_4: '3/4',
    portionFull: '全份',
    // 攝入 - 飲料
    beverages: '飲料',
    water: '水',
    soup: '湯',
    milk: '奶',
    juice: '果汁',
    sugarWater: '糖水',
    tea: '茶',
    ml: '毫升',
    // 攝入 - 其他
    otherIntake: '其他',
    cookies: '餅乾',
    snacks: '點心',
    candy: '零食',
    dessert: '甜品',
    pieces: '塊/粒',
    // 攝入 - 鼻胃飼
    tubeFeeding: '鼻胃飼',
    isocal: 'Isocal',
    ultracal: 'Ultracal',
    glucerna: 'Glucerna',
    isosource: 'Isosource',
    compleat: 'Compleat',
    // 排出 - 尿液
    urineOutput: '尿液',
    urineVolume: '尿量',
    urineColor: '顏色',
    colorClear: '透明',
    colorYellow: '黃',
    colorBrown: '啡',
    colorRed: '紅',
    // 排出 - 胃液
    gastricOutput: '胃液',
    gastricVolume: '胃液量',
    gastricPH: 'pH值',
    gastricColor: '顏色',
    
    // 衛生記錄項目
    bath: '沐浴',
    faceWash: '洗面',
    shave: '剃鬚',
    oralCare: '洗牙漱口',
    dentureCare: '洗口受假牙',
    nailTrim: '剪指甲',
    beddingChange: '換被套',
    sheetPillowChange: '換床單枕袋',
    cupWash: '洗杯',
    bedsideCabinet: '終理床頭櫃',
    wardrobe: '終理衣箱',
    bowelCount: '大便次數',
    bowelAmount: '大便量',
    bowelConsistency: '大便性質',
    bowelMedication: '大便藥',
    noBowelMovement: '無大便',
    wateryStools: '水狀',
    times: '次',
    
    // 記錄狀態
    normal: '正常',
    abnormal: '異常',
    suspended: '暫停',
    pending: '待記錄',
    completed: '已完成',
    
    // 備註（記錄中使用）
    noteInHospital: '入院',
    noteOnLeave: '渡假',
    noteOutpatient: '外出',
    
    // 性別
    male: '男',
    female: '女',
    
    // 體位
    left: '左',
    center: '平',
    right: '右',
    
    // 時間相關
    morning: '上午',
    afternoon: '下午',
    evening: '晚上',
    night: '深夜',
    
    // 設置頁面
    accountInfo: '帳戶資訊',
    features: '功能',
    about: '關於',
    signOut: '登出',
    confirmSignOut: '確認登出',
    confirmSignOutMessage: '您確定要登出嗎？',
    
    // 帳戶資訊
    email: '電子郵件',
    displayName: '顯示名稱',
    notSet: '未設定',
    
    // 功能設置
    language: '語言',
    missingRecordsLookback: '補錄回溯天數',
    days: '天',
    daysUnit: '/ 天',
    inputError: '輸入錯誤',
    inputErrorMessage: '請輸入介於 1 至 365 的整數',
    corrected: '已修正',
    correctedMessage: '回溯天數已修正至',
    
    // 關於
    version: '版本',
    system: '系統',
    systemName: 'Station C 護理記錄',
    footer: 'Station C 護理記錄系統',
    copyright: '© 2025 All Rights Reserved',
    
    // 語言選項
    languageTraditionalChinese: '繁體中文',
    languageSimplifiedChinese: '简体中文',
    languageEnglish: 'English',
    
    // 導航標籤
    scan: '掃描',
    patientList: '院友列表',
    allStations: '全部站區',
    
    // 登入頁面
    loginTitle: '護理記錄',
    loginSubtitle: '請登入以繼續使用系統',
    emailPlaceholder: '電子郵件',
    passwordPlaceholder: '密碼',
    loginButton: '登入',
    loginError: '錯誤',
    loginErrorEmpty: '請輸入電子郵件和密碼',
    loginFailed: '登入失敗',
    loginFailedMessage: '請檢查您的電子郵件和密碼',
    unknownError: '發生未知錯誤，請稍後再試',
    loginButtonLabel: '登入按鈕',
    
    // 掃描頁面
    qrCodeScan: 'QR Code 掃描',
    qrCodeScanSubtitle: '在手機 App 上使用相機掃描床位 QR Code',
    or: '或',
    manualSelect: '從院友列表選擇',
    goToPatientList: '前往院友列表',
    scanTip: '提示：在真實手機上使用此 App 可以直接掃描 QR Code',
    requestingCamera: '正在請求相機權限...',
    cameraPermissionRequired: '需要相機權限',
    cameraPermissionMessage: '此應用程式需要存取您的相機以掃描 QR Code',
    grantPermission: '授予相機權限',
    invalidQRCode: '無效的 QR Code',
    invalidQRCodeMessage: '請掃描有效的床位 QR Code',
    bedNotFound: '找不到床位',
    bedNotFoundMessage: '無法找到對應的床位資訊',
    bedEmpty: '床位空置',
    bedEmptyMessage: '目前沒有在住院友',
    scanFailed: '掃描失敗',
    scanFailedMessage: 'QR Code 格式無效或資料庫查詢失敗',
    aimAtQRCode: '將鏡頭對準 QR Code',
    scanningWillStart: '掃描會自動開始',
    tapToFocus: '點按螢幕以對焦',
    
    // 搜索
    searchPlaceholder: '搜尋院友姓名、床號...',
    
    // 年齡單位
    years: '歲',
    yearsShort: 'yrs',
    
    // 星期
    sunday: '日',
    monday: '一',
    tuesday: '二',
    wednesday: '三',
    thursday: '四',
    friday: '五',
    saturday: '六',
    
    // 月份
    january: '1',
    february: '2',
    march: '3',
    april: '4',
    may: '5',
    june: '6',
    july: '7',
    august: '8',
    september: '9',
    october: '10',
    november: '11',
    december: '12',
    year: '年',
    month: '月',
    
    // 時段
    timeSlot: '時段',
    pendingPatrol: '待巡',
    pendingRecord: '待記錄',
    pendingObservation: '待觀察',
    comingSoon: '敬請期待',
    close: '關閉',
    noTabsAvailableForDate: '該日期沒有可用的護理記錄選項卡',
    selectDifferentDate: '請選擇其他日期',
    
    // 體位
    leftPosition: '左',
    centerPosition: '平',
    rightPosition: '右',
    
    // 尿便狀態
    urine: '尿',
    stool: '便',
    none: '無',
    amount: '量',
    color: '顏色',
    texture: '質地',
    
    // 觀察狀態簡稱
    statusN: 'N',
    statusP: 'P',
    statusS: 'S',
    
    // 記錄詳情頁面
    error: '錯誤',
    pleaseEnterRecorderName: '請輸入記錄者姓名',
    patientDataNotFound: '找不到院友資料，無法儲存',
    confirmDelete: '確認刪除',
    confirmDeleteMessage: '您確定要刪除此記錄嗎？',
    saveRecordFailed: '保存記錄失敗，請重試',
    deleteRecordFailed: '刪除記錄失敗，請重試',
    editRecord: '編輯',
    addRecord: '新增',
    
    // 表單標籤
    actualPatrolTime: '實際巡房時間',
    noteOrStatus: '備註',
    excretionStatus: '排泄情況',
    urineVolume: '小便量',
    stoolColor: '大便顏色',
    stoolTexture: '大便質地',
    stoolAmount: '大便量',
    restraintItems: '約束物品',
    actualObservationTime: '實際觀察時間',
    observationStatus: '觀察狀態',
    turnPosition: '轉身位置',
    recorder: '記錄者',
    pleaseEnterRecorder: '請輸入記錄者姓名',
    
    // 排泄選項
    hasUrine: '有尿',
    hasStool: '有便',
    noExcretion: '無',
    large: '大',
    medium: '中',
    small: '小',
    normalStool: '正常',
    looseStool: '稀',
    softStool: '溏',
    diarrhea: '瀉',
    constipation: '秘',
    blackStool: '黑',
    greenStool: '綠',
    yellowStool: '黃',
    brownStool: '啡',
    redStool: '紅',
    
    // 觀察狀態
    normalStatus: '正常 (N)',
    problemStatus: '異常 (P)',
    suspendedStatus: '暫停 (S)',
    
    // 約束物品
    bedRail: '床欄',
    wheelchairBelt: '輪椅安全帶',
    wheelchairTable: '輪椅餐桌板',
    vest: '約束背心',
    wristRestraint: '手部約束帶',
    ankleRestraint: '腳部約束帶',
    mitt: '手套',
    
    // 提示信息
    patientInfo: '院友資訊',
    date: '日期',
    timeSlotLabel: '時段',
    autoPositionHint: '轉身順序提示',
    suggestedPosition: '系統已根據時段自動選擇建議位置，您可以手動調整',
    
    // 按鈕
    deleteButton: '刪除記錄',
    saveButton: '儲存',
    backButton: '返回',
  },
  'zh-CN': {
    // 通用
    confirm: '确认',
    cancel: '取消',
    save: '保存',
    delete: '删除',
    edit: '编辑',
    back: '返回',
    loading: '加载中...',
    
    // 主页面
    home: '首页',
    careRecords: '护理记录',
    settings: '设置',
    patients: '院友列表',
    
    // 院友卡片
    patientName: '院友姓名',
    bed: '床号',
    roomNumber: '房号',
    statusInHospital: '入院',
    statusOnLeave: '度假',
    statusOutpatient: '外出',
    careLevel: '护理等级',
    fullCare: '全护理',
    partialCare: '半护理',
    selfCare: '自理',
    
    // 护理记录页面
    patrolRecord: '巡房记录',
    diaperChange: '换片记录',
    intakeOutput: '出入量',
    restraintObservation: '约束观察',
    positionChange: '转身记录',
    toiletTraining: '如厕训练',
    hygieneRecord: '卫生记录',
    previousPatient: '上一位',
    nextPatient: '下一位',
    selectDate: '选择日期',
    today: '今天',
    daily: '全天',
    
    // 出入量记录
    intake: '摄入',
    output: '排出',
    hourlyRecord: '每小时记录',
    hourSlot: '时段',
    // 摄入 - 餐膳
    meals: '餐膳',
    breakfast: '早餐',
    lunch: '午餐',
    afternoonTea: '下午茶',
    dinner: '晚餐',
    mealPortion: '份量',
    portion1_4: '1/4',
    portion2_4: '2/4',
    portion3_4: '3/4',
    portionFull: '全份',
    // 摄入 - 饮料
    beverages: '饮料',
    water: '水',
    soup: '汤',
    milk: '奶',
    juice: '果汁',
    sugarWater: '糖水',
    tea: '茶',
    ml: '毫升',
    // 摄入 - 其他
    otherIntake: '其他',
    cookies: '饼干',
    snacks: '点心',
    candy: '零食',
    dessert: '甜品',
    pieces: '块/粒',
    // 摄入 - 鼻胃饲
    tubeFeeding: '鼻胃饲',
    isocal: 'Isocal',
    ultracal: 'Ultracal',
    glucerna: 'Glucerna',
    isosource: 'Isosource',
    compleat: 'Compleat',
    // 排出 - 尿液
    urineOutput: '尿液',
    urineVolume: '尿量',
    urineColor: '颜色',
    colorClear: '透明',
    colorYellow: '黄',
    colorBrown: '啡',
    colorRed: '红',
    // 排出 - 胃液
    gastricOutput: '胃液',
    gastricVolume: '胃液量',
    gastricPH: 'pH值',
    gastricColor: '颜色',
    
    // 卫生记录项目
    bath: '沐浴',
    faceWash: '洗面',
    shave: '剃须',
    oralCare: '洗牙漱口',
    dentureCare: '洗口受假牙',
    nailTrim: '剪指甲',
    beddingChange: '换被套',
    sheetPillowChange: '换床单枕袋',
    cupWash: '洗杯',
    bedsideCabinet: '终理床头柜',
    wardrobe: '终理衣箱',
    bowelCount: '大便次数',
    bowelAmount: '大便量',
    bowelConsistency: '大便性质',
    bowelMedication: '大便药',
    noBowelMovement: '无大便',
    wateryStools: '水状',
    times: '次',
    
    // 记录状态
    normal: '正常',
    abnormal: '异常',
    suspended: '暂停',
    pending: '待记录',
    completed: '已完成',
    
    // 备注（记录中使用）
    noteInHospital: '入院',
    noteOnLeave: '度假',
    noteOutpatient: '外出',
    
    // 性别
    male: '男',
    female: '女',
    
    // 体位
    left: '左',
    center: '平',
    right: '右',
    
    // 时间相关
    morning: '上午',
    afternoon: '下午',
    evening: '晚上',
    night: '深夜',
    
    // 设置页面
    accountInfo: '账户信息',
    features: '功能',
    about: '关于',
    signOut: '退出',
    confirmSignOut: '确认退出',
    confirmSignOutMessage: '您确定要退出吗？',
    
    // 账户信息
    email: '电子邮箱',
    displayName: '显示名称',
    notSet: '未设置',
    
    // 功能设置
    language: '语言',
    missingRecordsLookback: '补录回溯天数',
    days: '天',
    daysUnit: '/ 天',
    inputError: '输入错误',
    inputErrorMessage: '请输入介于 1 至 365 的整数',
    corrected: '已修正',
    correctedMessage: '回溯天数已修正至',
    
    // 关于
    version: '版本',
    system: '系统',
    systemName: 'Station C 护理记录',
    footer: 'Station C 护理记录系统',
    copyright: '© 2025 All Rights Reserved',
    
    // 语言选项
    languageTraditionalChinese: '繁體中文',
    languageSimplifiedChinese: '简体中文',
    languageEnglish: 'English',
    
    // 导航标签
    scan: '扫描',
    patientList: '院友列表',
    allStations: '全部站区',
    
    // 登录页面
    loginTitle: '护理记录',
    loginSubtitle: '请登录以继续使用系统',
    emailPlaceholder: '电子邮箱',
    passwordPlaceholder: '密码',
    loginButton: '登录',
    loginError: '错误',
    loginErrorEmpty: '请输入电子邮箱和密码',
    loginFailed: '登录失败',
    loginFailedMessage: '请检查您的电子邮箱和密码',
    unknownError: '发生未知错误，请稍后再试',
    loginButtonLabel: '登录按钮',
    
    // 扫描页面
    qrCodeScan: 'QR Code 扫描',
    qrCodeScanSubtitle: '在手机 App 上使用相机扫描床位 QR Code',
    or: '或',
    manualSelect: '从院友列表选择',
    goToPatientList: '前往院友列表',
    scanTip: '提示：在真实手机上使用此 App 可以直接扫描 QR Code',
    requestingCamera: '正在请求相机权限...',
    cameraPermissionRequired: '需要相机权限',
    cameraPermissionMessage: '此应用程序需要访问您的相机以扫描 QR Code',
    grantPermission: '授予相机权限',
    invalidQRCode: '无效的 QR Code',
    invalidQRCodeMessage: '请扫描有效的床位 QR Code',
    bedNotFound: '找不到床位',
    bedNotFoundMessage: '无法找到对应的床位信息',
    bedEmpty: '床位空置',
    bedEmptyMessage: '目前没有在住院友',
    scanFailed: '扫描失败',
    scanFailedMessage: 'QR Code 格式无效或数据库查询失败',
    aimAtQRCode: '将镜头对准 QR Code',
    scanningWillStart: '扫描会自动开始',
    tapToFocus: '点按屏幕以对焦',
    
    // 搜索
    searchPlaceholder: '搜索院友姓名、床号...',
    
    // 年龄单位
    years: '岁',
    yearsShort: 'yrs',
    
    // 星期
    sunday: '日',
    monday: '一',
    tuesday: '二',
    wednesday: '三',
    thursday: '四',
    friday: '五',
    saturday: '六',
    
    // 月份
    january: '1',
    february: '2',
    march: '3',
    april: '4',
    may: '5',
    june: '6',
    july: '7',
    august: '8',
    september: '9',
    october: '10',
    november: '11',
    december: '12',
    year: '年',
    month: '月',
    
    // 时段
    timeSlot: '时段',
    pendingPatrol: '待巡',
    pendingRecord: '待记录',
    pendingObservation: '待观察',
    comingSoon: '敬请期待',
    close: '关闭',
    noTabsAvailableForDate: '该日期没有可用的护理记录选项卡',
    selectDifferentDate: '请选择其他日期',
    
    // 体位
    leftPosition: '左',
    centerPosition: '平',
    rightPosition: '右',
    
    // 尿便状态
    urine: '尿',
    stool: '便',
    none: '无',
    amount: '量',
    color: '颜色',
    texture: '质地',
    
    // 观察状态简称
    statusN: 'N',
    statusP: 'P',
    statusS: 'S',
    
    // 记录详情页面
    error: '错误',
    pleaseEnterRecorderName: '请输入记录者姓名',
    patientDataNotFound: '找不到院友资料，无法保存',
    confirmDelete: '确认删除',
    confirmDeleteMessage: '您确定要删除此记录吗？',
    saveRecordFailed: '保存记录失败，请重试',
    deleteRecordFailed: '删除记录失败，请重试',
    editRecord: '编辑',
    addRecord: '新增',
    
    // 表单标签
    actualPatrolTime: '实际巡房时间',
    noteOrStatus: '备注',
    excretionStatus: '排泄情况',
    urineVolume: '小便量',
    stoolColor: '大便颜色',
    stoolTexture: '大便质地',
    stoolAmount: '大便量',
    restraintItems: '约束物品',
    actualObservationTime: '实际观察时间',
    observationStatus: '观察状态',
    turnPosition: '转身位置',
    recorder: '记录者',
    pleaseEnterRecorder: '请输入记录者姓名',
    
    // 排泄选项
    hasUrine: '有尿',
    hasStool: '有便',
    noExcretion: '无',
    large: '大',
    medium: '中',
    small: '小',
    normalStool: '正常',
    looseStool: '稀',
    softStool: '溏',
    diarrhea: '泻',
    constipation: '秘',
    blackStool: '黑',
    greenStool: '绿',
    yellowStool: '黄',
    brownStool: '啡',
    redStool: '红',
    
    // 观察状态
    normalStatus: '正常 (N)',
    problemStatus: '异常 (P)',
    suspendedStatus: '暂停 (S)',
    
    // 约束物品
    bedRail: '床栏',
    wheelchairBelt: '轮椅安全带',
    wheelchairTable: '轮椅餐桌板',
    vest: '约束背心',
    wristRestraint: '手部约束带',
    ankleRestraint: '脚部约束带',
    mitt: '手套',
    
    // 提示信息
    patientInfo: '院友信息',
    date: '日期',
    timeSlotLabel: '时段',
    autoPositionHint: '转身顺序提示',
    suggestedPosition: '系统已根据时段自动选择建议位置，您可以手动调整',
    
    // 按钮
    deleteButton: '删除记录',
    saveButton: '保存',
    backButton: '返回',
  },
  'en': {
    // Common
    confirm: 'Confirm',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    back: 'Back',
    loading: 'Loading...',
    
    // Main Pages
    home: 'Home',
    careRecords: 'Care Records',
    settings: 'Settings',
    patients: 'Patients',
    
    // Patient Card
    patientName: 'Patient Name',
    bed: 'Bed',
    roomNumber: 'Room',
    statusInHospital: 'Hospitalized',
    statusOnLeave: 'On Leave',
    statusOutpatient: 'Outpatient',
    careLevel: 'Care Level',
    fullCare: 'Full Care',
    partialCare: 'Partial Care',
    selfCare: 'Self Care',
    
    // Care Records Page
    patrolRecord: 'Patrol Record',
    diaperChange: 'Diaper Change',
    intakeOutput: 'Intake/Output',
    restraintObservation: 'Restraint Observation',
    positionChange: 'Position Change',
    toiletTraining: 'Toilet Training',
    hygieneRecord: 'Hygiene Record',
    previousPatient: 'Previous',
    nextPatient: 'Next',
    selectDate: 'Select Date',
    today: 'Today',
    daily: 'Daily',
    
    // Intake/Output Records
    intake: 'Intake',
    output: 'Output',
    hourlyRecord: 'Hourly Record',
    hourSlot: 'Hour',
    // Intake - Meals
    meals: 'Meals',
    breakfast: 'Breakfast',
    lunch: 'Lunch',
    afternoonTea: 'Afternoon Tea',
    dinner: 'Dinner',
    mealPortion: 'Portion',
    portion1_4: '1/4',
    portion2_4: '2/4',
    portion3_4: '3/4',
    portionFull: 'Full',
    // Intake - Beverages
    beverages: 'Beverages',
    water: 'Water',
    soup: 'Soup',
    milk: 'Milk',
    juice: 'Juice',
    sugarWater: 'Sugar Water',
    tea: 'Tea',
    ml: 'ml',
    // Intake - Others
    otherIntake: 'Others',
    cookies: 'Cookies',
    snacks: 'Snacks',
    candy: 'Candy',
    dessert: 'Dessert',
    pieces: 'pcs',
    // Intake - Tube Feeding
    tubeFeeding: 'Tube Feeding',
    isocal: 'Isocal',
    ultracal: 'Ultracal',
    glucerna: 'Glucerna',
    isosource: 'Isosource',
    compleat: 'Compleat',
    // Output - Urine
    urineOutput: 'Urine',
    urineVolume: 'Urine Volume',
    urineColor: 'Color',
    colorClear: 'Clear',
    colorYellow: 'Yellow',
    colorBrown: 'Brown',
    colorRed: 'Red',
    // Output - Gastric
    gastricOutput: 'Gastric',
    gastricVolume: 'Gastric Volume',
    gastricPH: 'pH',
    gastricColor: 'Color',
    
    // Hygiene Record Items
    bath: 'Bath',
    faceWash: 'Face Wash',
    shave: 'Shave',
    oralCare: 'Oral Care',
    dentureCare: 'Denture Care',
    nailTrim: 'Nail Trimming',
    beddingChange: 'Bedding Change',
    sheetPillowChange: 'Sheet & Pillow Change',
    cupWash: 'Cup Wash',
    bedsideCabinet: 'Bedside Cabinet Tidying',
    wardrobe: 'Wardrobe Tidying',
    bowelCount: 'Bowel Movement Count',
    bowelAmount: 'Bowel Amount',
    bowelConsistency: 'Bowel Consistency',
    bowelMedication: 'Bowel Medication',
    noBowelMovement: 'No Bowel Movement',
    wateryStools: 'Watery',
    times: 'times',
    
    // Record Status
    normal: 'Normal',
    abnormal: 'Abnormal',
    suspended: 'Suspended',
    pending: 'Pending',
    completed: 'Completed',
    
    // Notes (in records)
    noteInHospital: 'Hospitalized',
    noteOnLeave: 'On Leave',
    noteOutpatient: 'Outpatient',
    
    // Gender
    male: 'Male',
    female: 'Female',
    
    // Position
    left: 'Left',
    center: 'Supine',
    right: 'Right',
    
    // Time Related
    morning: 'Morning',
    afternoon: 'Afternoon',
    evening: 'Evening',
    night: 'Night',
    
    // Settings Page
    accountInfo: 'Account Information',
    features: 'Features',
    about: 'About',
    signOut: 'Sign Out',
    confirmSignOut: 'Confirm Sign Out',
    confirmSignOutMessage: 'Are you sure you want to sign out?',
    
    // Account Information
    email: 'Email',
    displayName: 'Display Name',
    notSet: 'Not Set',
    
    // Feature Settings
    language: 'Language',
    missingRecordsLookback: 'Missing Records Lookback',
    days: 'Days',
    daysUnit: '/ Days',
    inputError: 'Input Error',
    inputErrorMessage: 'Please enter an integer between 1 and 365',
    corrected: 'Corrected',
    correctedMessage: 'Lookback days corrected to',
    
    // About
    version: 'Version',
    system: 'System',
    systemName: 'Station C Care Records',
    footer: 'Station C Care Records System',
    copyright: '© 2025 All Rights Reserved',
    
    // Language Options
    languageTraditionalChinese: '繁體中文',
    languageSimplifiedChinese: '简体中文',
    languageEnglish: 'English',
    
    // Navigation Labels
    scan: 'Scan',
    patientList: 'Patients',
    allStations: 'All Stations',
    
    // Login Page
    loginTitle: 'Care Records',
    loginSubtitle: 'Please login to continue',
    emailPlaceholder: 'Email',
    passwordPlaceholder: 'Password',
    loginButton: 'Login',
    loginError: 'Error',
    loginErrorEmpty: 'Please enter email and password',
    loginFailed: 'Login Failed',
    loginFailedMessage: 'Please check your email and password',
    unknownError: 'An unknown error occurred, please try again later',
    loginButtonLabel: 'Login Button',
    
    // Scan Page
    qrCodeScan: 'QR Code Scan',
    qrCodeScanSubtitle: 'Use the camera on your phone to scan the bed QR Code',
    or: 'or',
    manualSelect: 'Select from Patient List',
    goToPatientList: 'Go to Patient List',
    scanTip: 'Tip: Use this app on a real phone to directly scan QR Codes',
    requestingCamera: 'Requesting camera permission...',
    cameraPermissionRequired: 'Camera Permission Required',
    cameraPermissionMessage: 'This app requires camera access to scan QR Codes',
    grantPermission: 'Grant Camera Permission',
    invalidQRCode: 'Invalid QR Code',
    invalidQRCodeMessage: 'Please scan a valid bed QR Code',
    bedNotFound: 'Bed Not Found',
    bedNotFoundMessage: 'Could not find the corresponding bed information',
    bedEmpty: 'Bed Empty',
    bedEmptyMessage: 'Currently no patient in this bed',
    scanFailed: 'Scan Failed',
    scanFailedMessage: 'Invalid QR Code format or database query failed',
    aimAtQRCode: 'Aim camera at QR Code',
    scanningWillStart: 'Scanning will start automatically',
    tapToFocus: 'Tap screen to focus',
    
    // Search
    searchPlaceholder: 'Search patient name, bed number...',
    
    // Age Unit
    years: 'years',
    yearsShort: 'yrs',
    
    // Weekdays
    sunday: 'Sun',
    monday: 'Mon',
    tuesday: 'Tue',
    wednesday: 'Wed',
    thursday: 'Thu',
    friday: 'Fri',
    saturday: 'Sat',
    
    // Months
    january: 'Jan',
    february: 'Feb',
    march: 'Mar',
    april: 'Apr',
    may: 'May',
    june: 'Jun',
    july: 'Jul',
    august: 'Aug',
    september: 'Sep',
    october: 'Oct',
    november: 'Nov',
    december: 'Dec',
    year: '',
    month: '',
    
    // Time Slot
    timeSlot: 'Time',
    pendingPatrol: 'Pending',
    pendingRecord: 'Pending',
    pendingObservation: 'Pending',
    comingSoon: 'Coming Soon',
    close: 'Close',
    noTabsAvailableForDate: 'No care record tabs available for this date',
    selectDifferentDate: 'Please select a different date',
    
    // Body Position
    leftPosition: 'Left',
    centerPosition: 'Supine',
    rightPosition: 'Right',
    
    // Urine/Stool Status
    urine: 'Urine',
    stool: 'Stool',
    none: 'None',
    amount: 'Amount',
    color: 'Color',
    texture: 'Texture',
    
    // Observation Status
    statusN: 'N',
    statusP: 'P',
    statusS: 'S',
    
    // Record Detail Page
    error: 'Error',
    pleaseEnterRecorderName: 'Please enter recorder name',
    patientDataNotFound: 'Patient data not found, cannot save',
    confirmDelete: 'Confirm Delete',
    confirmDeleteMessage: 'Are you sure you want to delete this record?',
    saveRecordFailed: 'Failed to save record, please try again',
    deleteRecordFailed: 'Failed to delete record, please try again',
    editRecord: 'Edit',
    addRecord: 'Add',
    
    // Form Labels
    actualPatrolTime: 'Actual Patrol Time',
    noteOrStatus: 'Notes',
    excretionStatus: 'Excretion Status',
    urineVolume: 'Urine Volume',
    stoolColor: 'Stool Color',
    stoolTexture: 'Stool Texture',
    stoolAmount: 'Stool Amount',
    restraintItems: 'Restraint Items',
    actualObservationTime: 'Actual Observation Time',
    observationStatus: 'Observation Status',
    turnPosition: 'Turn Position',
    recorder: 'Recorder',
    pleaseEnterRecorder: 'Please enter recorder name',
    
    // Excretion Options
    hasUrine: 'Has Urine',
    hasStool: 'Has Stool',
    noExcretion: 'None',
    large: 'Large',
    medium: 'Medium',
    small: 'Small',
    normalStool: 'Normal',
    looseStool: 'Loose',
    softStool: 'Soft',
    diarrhea: 'Diarrhea',
    constipation: 'Constipated',
    blackStool: 'Black',
    greenStool: 'Green',
    yellowStool: 'Yellow',
    brownStool: 'Brown',
    redStool: 'Red',
    
    // Observation Status
    normalStatus: 'Normal (N)',
    problemStatus: 'Problem (P)',
    suspendedStatus: 'Suspended (S)',
    
    // Restraint Items
    bedRail: 'Bed Rail',
    wheelchairBelt: 'Wheelchair Belt',
    wheelchairTable: 'Wheelchair Table',
    vest: 'Vest',
    wristRestraint: 'Wrist Restraint',
    ankleRestraint: 'Ankle Restraint',
    mitt: 'Mitt',
    
    // Hints
    patientInfo: 'Patient Information',
    date: 'Date',
    timeSlotLabel: 'Time Slot',
    autoPositionHint: 'Position Rotation Hint',
    suggestedPosition: 'The system has automatically selected a suggested position based on the time slot. You can manually adjust it.',
    
    // Buttons
    deleteButton: 'Delete Record',
    saveButton: 'Save',
    backButton: 'Back',
  },
};

let currentLanguage: Language = 'zh-TW';

export const getLanguage = async (): Promise<Language> => {
  try {
    const saved = await AsyncStorage.getItem(LANGUAGE_KEY);
    if (saved && (saved === 'zh-TW' || saved === 'zh-CN' || saved === 'en')) {
      currentLanguage = saved;
      return saved;
    }
  } catch (err) {
    console.warn('讀取語言設定失敗:', err);
  }
  return currentLanguage;
};

export const setLanguage = async (lang: Language): Promise<void> => {
  try {
    await AsyncStorage.setItem(LANGUAGE_KEY, lang);
    currentLanguage = lang;
    eventBus.emit('languageChanged', { language: lang });
  } catch (err) {
    console.warn('儲存語言設定失敗:', err);
  }
};

export const t = (key: keyof typeof translations['zh-TW']): string => {
  return translations[currentLanguage][key] || key;
};

export const useTranslation = () => {
  const [lang, setLang] = React.useState<Language>(currentLanguage);
  
  React.useEffect(() => {
    getLanguage().then(setLang);
    
    const handler = (data: any) => {
      if (data?.language) {
        setLang(data.language);
      }
    };
    
    eventBus.on('languageChanged', handler);
    return () => eventBus.off('languageChanged', handler);
  }, []);
  
  return {
    t: (key: keyof typeof translations['zh-TW']) => translations[lang][key] || key,
    language: lang,
    setLanguage: async (newLang: Language) => {
      await setLanguage(newLang);
      setLang(newLang);
    },
  };
};

// 格式化患者姓名（根据语言显示中文或英文姓名，支持繁简转换）
export const formatPatientName = (patient: { 
  中文姓名?: string; 
  中文姓氏?: string;
  中文名字?: string;
  英文姓名?: string;
  英文姓氏?: string;
  英文名字?: string;
}, lang?: Language): string => {
  const currentLang = lang || currentLanguage;
  
  // 英文模式：优先使用 "英文姓氏, 英文名字"，其次使用英文姓名
  if (currentLang === 'en') {
    if (patient.英文姓氏 && patient.英文名字) {
      return `${patient.英文姓氏}, ${patient.英文名字}`;
    }
    if (patient.英文姓名) {
      return patient.英文姓名;
    }
    // 没有英文名时fallback到中文
  }
  
  // 中文模式：使用中文姓名
  let chineseName = patient.中文姓名 || '';
  
  // 如果没有中文姓名，尝试组合中文姓氏和名字
  if (!chineseName && patient.中文姓氏 && patient.中文名字) {
    chineseName = `${patient.中文姓氏}${patient.中文名字}`;
  }
  
  // 简体中文：转换繁体到简体
  if (currentLang === 'zh-CN' && chineseName) {
    return convertToSimplified(chineseName);
  }
  
  // 繁体中文或没有中文名时的fallback
  return chineseName || patient.英文姓名 || '';
};

// Hook 版本
export const usePatientName = () => {
  const { language } = useTranslation();
  
  return (patient: { 
    中文姓名?: string; 
    中文姓氏?: string;
    中文名字?: string;
    英文姓名?: string;
    英文姓氏?: string;
    英文名字?: string;
  }) => {
    return formatPatientName(patient, language);
  };
};

// 通用文本转换 Hook（用于转换任意中文文本）
export const useTextConverter = () => {
  const { language } = useTranslation();
  
  return (text: string) => {
    if (language === 'zh-CN') {
      return convertToSimplified(text);
    }
    return text;
  };
};
