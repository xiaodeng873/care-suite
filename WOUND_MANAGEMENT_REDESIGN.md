# å‚·å£ç®¡ç†ç³»çµ±é‡æ–°è¨­è¨ˆ

## è¨­è¨ˆç†å¿µ

æ ¹æ“šæ¥­å‹™éœ€æ±‚é‡æ–°è¨­è¨ˆå‚·å£ç®¡ç†ç³»çµ±ï¼Œå¯¦ç¾ä»¥ä¸‹é‚è¼¯ï¼š

1. **æ¯å€‹ç—…äººå¯ä»¥æœ‰å¤šå€‹å‚·å£**
2. **æ¯å€‹å‚·å£æœ‰ç¨ç«‹çš„ç™¼ç¾æ—¥æœŸ**
3. **æ¯å€‹å‚·å£è‡ªç™¼ç¾èµ·æœ€å°‘æ¯é€±è©•ä¼°ä¸€æ¬¡ï¼Œç›´åˆ°ç—Šç™’**
4. **æ¯æ¬¡è©•ä¼°éƒ½ä¿å­˜è¨˜éŒ„**
5. **ä¸»è¡¨æ ¼é¡¯ç¤ºä¸€é™¢å‹å°å¤šå‚·å£ï¼ˆå­ç´šå±¤æ¬¡çµæ§‹ï¼‰**
6. **è©•ä¼°å…§å®¹ä¿æŒä¸è®Š**

---

## æ•¸æ“šåº«çµæ§‹è¨­è¨ˆ

### æ–°è¡¨çµæ§‹

#### 1. `wounds` - å‚·å£ä¸»è¡¨ï¼ˆæ–°å¢ï¼‰

| æ¬„ä½åç¨± | é¡å‹ | èªªæ˜ |
|---------|------|------|
| `id` | uuid | ä¸»éµ |
| `patient_id` | integer | é™¢å‹IDï¼Œå¤–éµé—œè¯é™¢å‹ä¸»è¡¨ |
| `wound_code` | text | å‚·å£ç·¨è™Ÿï¼ˆå¦‚ W001, W002ï¼‰|
| `wound_name` | text | å‚·å£åç¨±/æè¿° |
| `discovery_date` | date | ç™¼ç¾æ—¥æœŸ |
| `wound_location` | jsonb | å‚·å£ä½ç½®ï¼ˆäººå½¢åœ–åº§æ¨™ï¼‰|
| `wound_type` | text | å‚·å£é¡å‹ï¼ˆå£“ç˜¡ã€å‰µå‚·ã€æ‰‹è¡“å‚·å£ç­‰ï¼‰|
| `wound_origin` | text | å‚·å£ä¾†æºï¼ˆæœ¬é™¢ç™¼ç¾ã€å¤–ä¾†å‚·å£ï¼‰|
| `status` | text | å‚·å£ç‹€æ…‹ï¼ˆactive, healed, transferredï¼‰|
| `healed_date` | date | ç—Šç™’æ—¥æœŸï¼ˆç‹€æ…‹ç‚º healed æ™‚å¡«å¯«ï¼‰|
| `next_assessment_due` | date | ä¸‹æ¬¡è©•ä¼°åˆ°æœŸæ—¥ |
| `remarks` | text | å‚™è¨» |
| `created_at` | timestamptz | å‰µå»ºæ™‚é–“ |
| `updated_at` | timestamptz | æ›´æ–°æ™‚é–“ |

#### 2. `wound_assessments` - å‚·å£è©•ä¼°è¨˜éŒ„è¡¨ï¼ˆä¿®æ”¹ï¼‰

| æ¬„ä½åç¨± | é¡å‹ | èªªæ˜ |
|---------|------|------|
| `id` | uuid | ä¸»éµ |
| `wound_id` | uuid | å‚·å£IDï¼Œå¤–éµé—œè¯ wounds è¡¨ |
| `patient_id` | integer | é™¢å‹IDï¼ˆå†—é¤˜ï¼Œæ–¹ä¾¿æŸ¥è©¢ï¼‰|
| `assessment_date` | date | è©•ä¼°æ—¥æœŸ |
| `assessor` | text | è©•ä¼°è€… |
| `area_length` | numeric | é•·åº¦ (cm) |
| `area_width` | numeric | é—Šåº¦ (cm) |
| `area_depth` | numeric | æ·±åº¦ (cm) |
| `stage` | text | éšæ®µ |
| `wound_status` | text | æœ¬æ¬¡è©•ä¼°æ™‚çš„å‚·å£ç‹€æ…‹ |
| `exudate_present` | boolean | æ˜¯å¦æœ‰æ»²å‡ºç‰© |
| `exudate_amount` | text | æ»²å‡ºç‰©é‡ |
| `exudate_color` | text | æ»²å‡ºç‰©é¡è‰² |
| `exudate_type` | text | æ»²å‡ºç‰©ç¨®é¡ |
| `odor` | text | æ°£å‘³ |
| `granulation` | text | è‚‰èŠ½ |
| `necrosis` | text | å£æ­» |
| `infection` | text | æ„ŸæŸ“ |
| `temperature` | text | é«”æº« |
| `surrounding_skin_condition` | text | å‘¨é‚Šçš®è†šç‹€æ³ |
| `surrounding_skin_color` | text | å‘¨é‚Šçš®è†šé¡è‰² |
| `cleanser` | text | æ´—åŠ‘ |
| `cleanser_other` | text | å…¶ä»–æ´—åŠ‘ |
| `dressings` | jsonb | æ•·æ–™ï¼ˆå¯è¤‡é¸ï¼‰|
| `dressing_other` | text | å…¶ä»–æ•·æ–™ |
| `wound_photos` | text[] | å‚·å£ç…§ç‰‡ |
| `remarks` | text | å‚™è¨» |
| `created_at` | timestamptz | å‰µå»ºæ™‚é–“ |
| `updated_at` | timestamptz | æ›´æ–°æ™‚é–“ |

---

## å¯¦é«”é—œä¿‚åœ– (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    é™¢å‹ä¸»è¡¨      â”‚
â”‚   (æ‚£è€…è³‡æ–™)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     wounds      â”‚
â”‚   (å‚·å£ä¸»è¡¨)     â”‚
â”‚                 â”‚
â”‚ â€¢ wound_code    â”‚
â”‚ â€¢ discovery_dateâ”‚
â”‚ â€¢ wound_locationâ”‚
â”‚ â€¢ status        â”‚
â”‚ â€¢ healed_date   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  wound_assessments  â”‚
â”‚   (å‚·å£è©•ä¼°è¨˜éŒ„)     â”‚
â”‚                     â”‚
â”‚ â€¢ assessment_date   â”‚
â”‚ â€¢ stage             â”‚
â”‚ â€¢ wound_status      â”‚
â”‚ â€¢ measurements      â”‚
â”‚ â€¢ treatment details â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¥­å‹™æµç¨‹è¨­è¨ˆ

### æµç¨‹ 1ï¼šæ–°å¢å‚·å£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç™¼ç¾å‚·å£    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰µå»ºå‚·å£è¨˜éŒ„ (wounds) â”‚
â”‚ â€¢ å¡«å¯«ç™¼ç¾æ—¥æœŸ        â”‚
â”‚ â€¢ æ¨™è¨˜å‚·å£ä½ç½®        â”‚
â”‚ â€¢ é¸æ“‡å‚·å£é¡å‹        â”‚
â”‚ â€¢ è¨­å®šå‚·å£ä¾†æº        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰µå»ºé¦–æ¬¡è©•ä¼°è¨˜éŒ„           â”‚
â”‚ (wound_assessments)       â”‚
â”‚ â€¢ è‡ªå‹•å¸¶å…¥å‚·å£è³‡è¨Š         â”‚
â”‚ â€¢ å¡«å¯«è©•ä¼°è©³ç´°å…§å®¹         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»çµ±è‡ªå‹•è¨ˆç®—ä¸‹æ¬¡è©•ä¼°æ—¥æœŸ   â”‚
â”‚ (ç™¼ç¾æ—¥æœŸ + 7 å¤©)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æµç¨‹ 2ï¼šå®šæœŸè©•ä¼°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»çµ±æé†’ï¼šå‚·å£è©•ä¼°åˆ°æœŸ      â”‚
â”‚ (æ¯é€±è‡ªå‹•æª¢æŸ¥)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¸æ“‡è¦è©•ä¼°çš„å‚·å£            â”‚
â”‚ (å¾ç—…äººçš„å‚·å£æ¸…å–®é¸æ“‡)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¡«å¯«è©•ä¼°å…§å®¹                â”‚
â”‚ â€¢ å°ºå¯¸æ¸¬é‡                  â”‚
â”‚ â€¢ ç‹€æ…‹è©•ä¼°                  â”‚
â”‚ â€¢ æ²»ç™‚è¨˜éŒ„                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ›´æ–°å‚·å£ç‹€æ…‹                â”‚
â”‚ â€¢ å¦‚ç‹€æ…‹ = ç—Šç™’ï¼š           â”‚
â”‚   - è¨­å®š healed_date       â”‚
â”‚   - æ¸…é™¤ä¸‹æ¬¡è©•ä¼°åˆ°æœŸæ—¥      â”‚
â”‚ â€¢ å¦‚ç‹€æ…‹ â‰  ç—Šç™’ï¼š           â”‚
â”‚   - è¨ˆç®—ä¸‹æ¬¡è©•ä¼°æ—¥æœŸ (+7å¤©) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æµç¨‹ 3ï¼šå‚·å£ç—Šç™’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è©•ä¼°æ™‚é¸æ“‡ã€Œå·²ç—Šç™’ã€ç‹€æ…‹    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»çµ±è‡ªå‹•è™•ç†ï¼š              â”‚
â”‚ â€¢ wounds.status = 'healed' â”‚
â”‚ â€¢ wounds.healed_date = ä»Šå¤©â”‚
â”‚ â€¢ æ¸…é™¤ next_assessment_due â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‚·å£é€²å…¥æ­·å²è¨˜éŒ„            â”‚
â”‚ (ä¸å†ç”¢ç”Ÿè©•ä¼°æé†’)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä»‹é¢è¨­è¨ˆ

### ä¸»è¡¨æ ¼è¨­è¨ˆï¼ˆä¸€é™¢å‹å°å¤šå‚·å£ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‚·å£ç®¡ç†                                                     [+ æ–°å¢å‚·å£]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” æœå°‹é™¢å‹...          [ç¯©é¸: â–¼å…¨éƒ¨] [å‚·å£ç‹€æ…‹: â–¼é€²è¡Œä¸­]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åºŠè™Ÿ â”‚ é™¢å‹å§“å   â”‚ å‚·å£æ•¸é‡ â”‚ å‚·å£æ¦‚è¦½                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¼ A1 â”‚ å¼µä¸‰       â”‚ 2       â”‚ ğŸ”´ W001 (é€²è¡Œä¸­) ğŸŸ¢ W002 (å·²ç—Šç™’)            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â”‚ å‚·å£ W001                                                               â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”‚ ç™¼ç¾æ—¥æœŸ: 2025-12-01 â”‚ ä½ç½®: å·¦è…³è¸ â”‚ é¡å‹: å£“ç˜¡                   â”‚  â”‚
â”‚ â”‚ â”‚ ç‹€æ…‹: é€²è¡Œä¸­         â”‚ ä¸‹æ¬¡è©•ä¼°: 2025-12-29 âš ï¸ (é€¾æœŸ2å¤©)           â”‚  â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ â”‚ è©•ä¼°è¨˜éŒ„ï¼š                                                        â”‚  â”‚
â”‚ â”‚ â”‚ â€¢ 2025-12-22 éšæ®µ2 (2Ã—3cm) - ç”± è­·å£«A è©•ä¼° [æŸ¥çœ‹]                 â”‚  â”‚
â”‚ â”‚ â”‚ â€¢ 2025-12-15 éšæ®µ2 (2.5Ã—3.5cm) - ç”± è­·å£«B è©•ä¼° [æŸ¥çœ‹]             â”‚  â”‚
â”‚ â”‚ â”‚ â€¢ 2025-12-08 éšæ®µ3 (3Ã—4cm) - ç”± è­·å£«A è©•ä¼° [æŸ¥çœ‹]                 â”‚  â”‚
â”‚ â”‚ â”‚ â€¢ 2025-12-01 éšæ®µ3 (3.5Ã—4.5cm) é¦–æ¬¡è©•ä¼° [æŸ¥çœ‹]                    â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ â”‚                                                    [æ–°å¢è©•ä¼°] [ç·¨è¼¯å‚·å£]â”‚
â”‚ â”‚                                                                         â”‚
â”‚ â”‚ å‚·å£ W002 (å·²ç—Šç™’)                                                      â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”‚ ç™¼ç¾æ—¥æœŸ: 2025-11-01 â”‚ ç—Šç™’æ—¥æœŸ: 2025-12-10 â”‚ ä½ç½®: å³æ‰‹èƒŒ        â”‚  â”‚
â”‚ â”‚ â”‚ è©•ä¼°æ¬¡æ•¸: 6 æ¬¡                                                    â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚   B2 â”‚ æå››       â”‚ 1       â”‚ ğŸŸ¡ W001 (æ²»ç™‚ä¸­)                             â”‚
â”‚   C3 â”‚ ç‹äº”       â”‚ 0       â”‚ -                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°å¢å‚·å£ Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°å¢å‚·å£                                              [X]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ é™¢å‹é¸æ“‡ï¼š  [é¸æ“‡é™¢å‹ â–¼]                                        â”‚
â”‚                                                                 â”‚
â”‚ â”€â”€â”€â”€ å‚·å£åŸºæœ¬è³‡æ–™ â”€â”€â”€â”€                                          â”‚
â”‚                                                                 â”‚
â”‚ å‚·å£ç·¨è™Ÿï¼š  [ W001 ] (è‡ªå‹•ç”Ÿæˆ)                                 â”‚
â”‚                                                                 â”‚
â”‚ ç™¼ç¾æ—¥æœŸï¼š  [ 2025-12-22 ğŸ“… ]                                   â”‚
â”‚                                                                 â”‚
â”‚ å‚·å£ä½ç½®ï¼š  [äººå½¢åœ–é¸æ“‡å€åŸŸ]                                    â”‚
â”‚             [å‰é¢ â—‹] [å¾Œé¢ â—‹]                                   â”‚
â”‚                                                                 â”‚
â”‚ å‚·å£é¡å‹ï¼š  [ å£“ç˜¡ â–¼ ]                                          â”‚
â”‚             å£“ç˜¡ / å‰µå‚· / æ‰‹è¡“å‚·å£ / ç³–å°¿ç—…å‚·å£ / å…¶ä»–          â”‚
â”‚                                                                 â”‚
â”‚ å‚·å£ä¾†æºï¼š  [ æœ¬é™¢ç™¼ç¾ â–¼ ]                                      â”‚
â”‚             æœ¬é™¢ç™¼ç¾ / å…¥é™¢æ™‚å·²æœ‰ / é†«é™¢è½‰ä»‹                    â”‚
â”‚                                                                 â”‚
â”‚ å‚™è¨»ï¼š      [                                          ]        â”‚
â”‚                                                                 â”‚
â”‚ â”€â”€â”€â”€ é¦–æ¬¡è©•ä¼°ï¼ˆé¸å¡«ï¼‰â”€â”€â”€â”€                                       â”‚
â”‚                                                                 â”‚
â”‚ â˜‘ï¸ åŒæ™‚é€²è¡Œé¦–æ¬¡è©•ä¼°                                             â”‚
â”‚                                                                 â”‚
â”‚ [é¦–æ¬¡è©•ä¼°è¡¨å–®...]                                               â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [å–æ¶ˆ]  [å„²å­˜å‚·å£]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°å¢è©•ä¼° Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‚·å£è©•ä¼° - W001                                       [X]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ é™¢å‹ï¼šå¼µä¸‰ (A1)                                                 â”‚
â”‚ å‚·å£ï¼šW001 - å·¦è…³è¸ (ç™¼ç¾æ—¥æœŸ: 2025-12-01)                      â”‚
â”‚ ä¸Šæ¬¡è©•ä¼°ï¼š2025-12-15 - éšæ®µ2                                    â”‚
â”‚                                                                 â”‚
â”‚ â”€â”€â”€â”€ è©•ä¼°è³‡æ–™ â”€â”€â”€â”€                                              â”‚
â”‚                                                                 â”‚
â”‚ è©•ä¼°æ—¥æœŸï¼š  [ 2025-12-22 ğŸ“… ]                                   â”‚
â”‚ è©•ä¼°è€…ï¼š    [ è­·å£«A ]                                           â”‚
â”‚                                                                 â”‚
â”‚ [å‚·å£å°ºå¯¸/ç‹€æ…‹/æ²»ç™‚ç­‰è©•ä¼°æ¬„ä½...]                               â”‚
â”‚                                                                 â”‚
â”‚ â”€â”€â”€â”€ å‚·å£ç‹€æ…‹æ›´æ–° â”€â”€â”€â”€                                          â”‚
â”‚                                                                 â”‚
â”‚ å‚·å£ç‹€æ…‹ï¼š  â—‹ æ²»ç™‚ä¸­  â—‹ æ”¹å–„ä¸­  â— å·²ç—Šç™’                        â”‚
â”‚                                                                 â”‚
â”‚ âš ï¸ é¸æ“‡ã€Œå·²ç—Šç™’ã€å¾Œï¼Œæ­¤å‚·å£å°‡ä¸å†ç”¢ç”Ÿè©•ä¼°æé†’                   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [å–æ¶ˆ]  [å„²å­˜è©•ä¼°]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è©•ä¼°æé†’é‚è¼¯

### æ¯é€±è©•ä¼°æª¢æŸ¥

```javascript
// å–å¾—éœ€è¦è©•ä¼°çš„å‚·å£
function getOverdueWounds() {
  return wounds.filter(wound => {
    // æ’é™¤å·²ç—Šç™’çš„å‚·å£
    if (wound.status === 'healed') return false;
    
    // æª¢æŸ¥æ˜¯å¦è¶…éä¸‹æ¬¡è©•ä¼°æ—¥æœŸ
    const today = new Date();
    const dueDate = new Date(wound.next_assessment_due);
    return dueDate <= today;
  });
}

// å–å¾—å³å°‡åˆ°æœŸçš„å‚·å£ï¼ˆ3å¤©å…§ï¼‰
function getUpcomingWounds() {
  return wounds.filter(wound => {
    if (wound.status === 'healed') return false;
    
    const today = new Date();
    const dueDate = new Date(wound.next_assessment_due);
    const daysUntilDue = (dueDate - today) / (1000 * 60 * 60 * 24);
    return daysUntilDue > 0 && daysUntilDue <= 3;
  });
}
```

### ä¸‹æ¬¡è©•ä¼°æ—¥æœŸè¨ˆç®—

```javascript
// åœ¨å‰µå»ºè©•ä¼°å¾Œè‡ªå‹•è¨ˆç®—ä¸‹æ¬¡è©•ä¼°æ—¥æœŸ
function calculateNextAssessmentDate(assessmentDate) {
  const next = new Date(assessmentDate);
  next.setDate(next.getDate() + 7);
  return next;
}

// å„²å­˜è©•ä¼°æ™‚æ›´æ–°å‚·å£çš„ä¸‹æ¬¡è©•ä¼°æ—¥æœŸ
async function saveAssessment(assessmentData, woundStatus) {
  // å„²å­˜è©•ä¼°è¨˜éŒ„
  await createWoundAssessment(assessmentData);
  
  // æ›´æ–°å‚·å£ç‹€æ…‹
  if (woundStatus === 'healed') {
    await updateWound({
      id: assessmentData.wound_id,
      status: 'healed',
      healed_date: assessmentData.assessment_date,
      next_assessment_due: null
    });
  } else {
    await updateWound({
      id: assessmentData.wound_id,
      status: woundStatus,
      next_assessment_due: calculateNextAssessmentDate(assessmentData.assessment_date)
    });
  }
}
```

---

## é·ç§»è¨ˆåŠƒ

### éšæ®µ 1ï¼šæ•¸æ“šåº«é·ç§»

1. å‰µå»º `wounds` è¡¨
2. ä¿®æ”¹ `wound_assessments` è¡¨ï¼ˆæ·»åŠ  `wound_id` æ¬„ä½ï¼‰
3. é·ç§»ç¾æœ‰æ•¸æ“šï¼ˆå°‡ `wound_details` ä¸­çš„å‚·å£æå–åˆ° `wounds` è¡¨ï¼‰

### éšæ®µ 2ï¼šå¾Œç«¯ API æ›´æ–°

1. æ·»åŠ  `wounds` CRUD æ“ä½œ
2. ä¿®æ”¹ `wound_assessments` ä»¥æ”¯æŒé—œè¯æŸ¥è©¢
3. æ·»åŠ å‚·å£ç‹€æ…‹æ›´æ–°é‚è¼¯

### éšæ®µ 3ï¼šå‰ç«¯æ›´æ–°

1. é‡æ§‹ `WoundManagement.tsx` ç‚ºå±¤æ¬¡çµæ§‹é¡¯ç¤º
2. å‰µå»º `WoundModal.tsx` ç”¨æ–¼ç®¡ç†å‚·å£
3. ä¿®æ”¹ `WoundAssessmentModal.tsx` ä»¥é—œè¯ç‰¹å®šå‚·å£
4. æ·»åŠ è©•ä¼°æé†’è¦–è¦ºæç¤º

---

## TypeScript é¡å‹å®šç¾©

```typescript
// å‚·å£ä¸»è¡¨
export interface Wound {
  id: string;
  patient_id: number;
  wound_code: string;
  wound_name?: string;
  discovery_date: string;
  wound_location: {
    x: number;
    y: number;
    side: 'front' | 'back';
    description?: string;
  };
  wound_type: 'pressure_ulcer' | 'trauma' | 'surgical' | 'diabetic' | 'other';
  wound_origin: 'facility' | 'admission' | 'hospital_referral';
  status: 'active' | 'healed' | 'transferred';
  healed_date?: string;
  next_assessment_due?: string;
  remarks?: string;
  created_at: string;
  updated_at: string;
}

// å‚·å£è©•ä¼°è¨˜éŒ„
export interface WoundAssessment {
  id: string;
  wound_id: string;
  patient_id: number;
  assessment_date: string;
  assessor?: string;
  area_length?: number;
  area_width?: number;
  area_depth?: number;
  stage?: string;
  wound_status: 'untreated' | 'treating' | 'improving' | 'healed';
  exudate_present: boolean;
  exudate_amount?: string;
  exudate_color?: string;
  exudate_type?: string;
  odor: string;
  granulation: string;
  necrosis: string;
  infection: string;
  temperature: string;
  surrounding_skin_condition?: string;
  surrounding_skin_color?: string;
  cleanser: string;
  cleanser_other?: string;
  dressings: string[];
  dressing_other?: string;
  wound_photos: string[];
  remarks?: string;
  created_at: string;
  updated_at: string;
}

// å‚·å£åŠå…¶è©•ä¼°è¨˜éŒ„çš„çµ„åˆè¦–åœ–
export interface WoundWithAssessments extends Wound {
  assessments: WoundAssessment[];
  latest_assessment?: WoundAssessment;
  assessment_count: number;
  is_overdue: boolean;
  days_until_due?: number;
}

// ç—…äººåŠå…¶å‚·å£çš„çµ„åˆè¦–åœ–
export interface PatientWithWounds {
  patient: Patient;
  wounds: WoundWithAssessments[];
  active_wound_count: number;
  healed_wound_count: number;
  overdue_assessment_count: number;
}
```

---

## å¾…é–‹ç™¼é …ç›®æ¸…å–®

### æ•¸æ“šåº«

- [x] å‰µå»º `wounds` è¡¨é·ç§»è…³æœ¬ âœ… `supabase/migrations/20251222000000_wound_management_restructure.sql`
- [x] ä¿®æ”¹ `wound_assessments` è¡¨é·ç§»è…³æœ¬ âœ…
- [x] å‰µå»ºæ•¸æ“šé·ç§»è…³æœ¬ï¼ˆå¾èˆŠçµæ§‹é·ç§»ï¼‰âœ…

### å¾Œç«¯/API

- [x] æ·»åŠ  `wounds` CRUD å‡½æ•¸åˆ° `database.tsx` âœ…
- [x] ä¿®æ”¹ `wound_assessments` å‡½æ•¸æ”¯æŒ `wound_id` âœ…
- [x] æ·»åŠ å‚·å£ç‹€æ…‹æ›´æ–°é‚è¼¯ âœ…
- [x] æ›´æ–° `PatientContext.tsx` æ·»åŠ å‚·å£ç®¡ç†å‡½æ•¸ âœ…

### å‰ç«¯

- [x] å‰µå»º `WoundModal.tsx` - æ–°å¢/ç·¨è¼¯å‚·å£ âœ…
- [x] å‰µå»º `WoundManagementNew.tsx` - å±¤æ¬¡çµæ§‹é¡¯ç¤º âœ…
- [x] å‰µå»º `SingleWoundAssessmentModal.tsx` - å–®å‚·å£è©•ä¼° âœ…
- [ ] æ·»åŠ è©•ä¼°æé†’è¦–è¦ºçµ„ä»¶ï¼ˆåœ¨ WoundManagementNew ä¸­å·²å¯¦ç¾åŸºæœ¬åŠŸèƒ½ï¼‰
- [ ] æ·»åŠ å‚·å£æ­·å²æ™‚é–“è»¸è¦–åœ–ï¼ˆå¯é¸åŠŸèƒ½ï¼‰

### æ¸¬è©¦

- [ ] å–®å…ƒæ¸¬è©¦ï¼šæ—¥æœŸè¨ˆç®—é‚è¼¯
- [ ] æ•´åˆæ¸¬è©¦ï¼šå‚·å£å‰µå»ºåˆ°ç—Šç™’å®Œæ•´æµç¨‹
- [ ] UI æ¸¬è©¦ï¼šè¡¨æ ¼å±•é–‹æ”¶åˆåŠŸèƒ½

---

## è¨ªå•æ–°åŠŸèƒ½

æ–°çš„å‚·å£ç®¡ç†é é¢å¯é€šéä»¥ä¸‹è·¯å¾‘è¨ªå•ï¼š

- **èˆŠç‰ˆå‚·å£ç®¡ç†**ï¼š`/wound`
- **æ–°ç‰ˆå‚·å£ç®¡ç†**ï¼š`/wound-new`

å»ºè­°åœ¨ç¢ºèªæ–°ç‰ˆæœ¬ç©©å®šå¾Œï¼Œå°‡ `/wound` è·¯ç”±æ›¿æ›ç‚ºæ–°ç‰ˆæœ¬ã€‚
